function formObject(){var e=this;e.Charactisitics=ko.observable(),e.Gender=ko.observable(),e.Race=ko.observable(),e.Age=ko.observable(),e.Frequency=ko.observable(),e.Timeday=ko.observable(),e.MonthofStatin=ko.observable(),e.YearofStatin=ko.observable(),e.MonthofSymptoms=ko.observable(),e.YearofSymptoms=ko.observable(),e.PainLevel=ko.observableArray([]),e.PainFrequency=ko.observableArray([]),e.PainLimitation=ko.observable("2"),e.SelectedDose=ko.observable(),e.YearList=ko.observableArray([]),e.DynamicYears=function(){for(var a=new Date,t=a.getFullYear(),o=0;100>o;o++)e.YearList.push(t-o)},e.DynamicYears(),e.AsianRosuvastatinWarning=ko.pureComputed(function(){var a=1==e.Race()&&7==appmodel.CurrentStatin()?!0:!1;return a},e),e.SimvastainDoseWarning=ko.pureComputed(function(){if(void 0==e.SelectedDose())return!1;var a="dosehigh"==e.SelectedDose().type&&8==appmodel.CurrentStatin()?!0:!1;return a},e),e.OtherDoseAlert=ko.pureComputed(function(){if(void 0==e.SelectedDose())return!1;var a="other"==e.SelectedDose().type?!0:!1;return a},e),e.DoseLevelPrint=ko.pureComputed(function(){var a=!1;return void 0==e.SelectedDose()?!1:(a="other"!=e.SelectedDose().type?!0:!1,"--"==e.SelectedDose().value&&(a=!1),a)},e),e.DoseLevelMessage=ko.pureComputed(function(){var a="None Selected";return void 0==e.SelectedDose()?!1:a='The selected prescription is considered a "'+e.SelectedDose().name+'"'},e),e.CKValue=ko.observable(""),e.CKStatus=ko.observable(""),e.CKUpdate=function(a){switch(e.CKValue(a),a){case"yes":e.CKStatus("warning question");break;case"no":e.CKStatus("question");break;case"unknown":e.CKStatus("data question");break;default:e.CKStatus("question")}},e.CKStatusClass=ko.pureComputed(function(){var a=e.CKValue();switch(a){case"yes":return"selected-btn1";case"no":return"selected-btn2";case"unknown":return"selected-btn3";default:return""}},e),e.TimeWarning=ko.pureComputed(function(){var a=new Date;a.setFullYear(e.YearofStatin(),e.MonthofStatin(),1);var t=new Date;t.setFullYear(e.YearofSymptoms(),e.MonthofSymptoms(),1);var o=t.getTime()<a.getTime()?!0:!1;return o},e),e.painSymptoms=ko.observable(!0),e.painSymptoms.ForEditing=ko.computed({read:function(){return e.painSymptoms().toString()},write:function(a){e.painSymptoms("true"===a)},owner:e}),e.painArea=ko.observable(!0),e.painArea.ForEditing=ko.computed({read:function(){return e.painArea().toString()},write:function(a){e.painArea("true"===a)},owner:e}),e.SymptomSeverityViewed=ko.observable(!1),e.SymptomSeverity=ko.observable("unknown"),e.SymptomSeverity.subscribe(function(){e.RecomendationDisabled()}),e.SymptomSeverityClass=ko.pureComputed(function(){var a="";return""!=e.SymptomSeverity()&&(a="severe"==e.SymptomSeverity()?"selected-btn1":"selected-btn2"),a},e),e.SymptomSeverityUpdate=function(a,t,o,r){switch(a){case"severe":e.SymptomSeverity("severe"),e.viewSwitch(t,o,r);break;case"moderate":e.SymptomSeverity("moderate"),e.viewSwitch(t,o,r);break;case"mild":e.SymptomSeverity("mild"),e.viewSwitch(t,o,r);break;case"nochange":o="false",e.viewSwitch(t,o,r);break;default:o="true",e.viewSwitch(t,o,r)}},e.PainSeverityUpdate=function(){var a="mild",t=void 0==e.PainLevel()?-1:parseInt(e.PainLevel().Value),o=void 0==e.PainFrequency()?-1:parseInt(e.PainFrequency().Value),r=parseInt(e.PainLimitation());-1==t&&-1==o&&0==r&&(a="unknown"),(1==t||1==o||1==r)&&(a="moderate"),(2==t||2==o||2==r)&&(a="severe"),e.SymptomSeverity(a)},e.PainLevel.subscribe(function(){e.PainSeverityUpdate()}),e.PainFrequency.subscribe(function(){e.PainSeverityUpdate()}),e.PainLimitation.subscribe(function(){e.PainSeverityUpdate()}),e.RiskFactorsViewed=ko.observable(!1),e.RiskFactors=ko.observableArray([]),e.RiskFactorsClass=ko.pureComputed(function(){var a=e.RiskFactors().length>0?"selected-btn1":"selected-btn2";return a},e),e.SecondaryMedicationsViewed=ko.observable(!1),e.SecondaryMedicationsClass=ko.pureComputed(function(){var e=appmodel.SecondaryMedications().length>0?"selected-btn1":"selected-btn2";return e},e),e.SecondaryCausesViewed=ko.observable(!1),e.SecondaryCauses=ko.observableArray([]),e.SecondaryCausesClass=ko.pureComputed(function(){var a=e.SecondaryCauses().length>0?"selected-btn1":"selected-btn2";return a},e),e.PreviousStatinViewed=ko.observable(!1),e.PreviousStatin=ko.observable(""),e.PreviousStatinClass=ko.pureComputed(function(){var a=e.PreviousStatin()?"selected-btn1":"selected-btn2";return a},e),e.PreviousStatinValueChange=function(a,t,o,r){e.PreviousStatin(a),e.viewSwitch("PreviousStatin","false",r)},e.viewSwitch=function(a,t,o){switch(a){case"RiskFactors":e.RiskFactorsViewed(!0),"true"==t&&e.RiskFactors([]);break;case"SecondaryMedications":e.SecondaryMedicationsViewed(!0),"true"==t&&appmodel.SecondaryMedications([]);break;case"SecondaryCauses":e.SecondaryCausesViewed(!0),"true"==t&&e.SecondaryCauses([]);break;case"SymptomSeverity":e.SymptomSeverityViewed(!0),"true"==t&&(e.SymptomSeverity(""),e.PainLevel(""),e.PainFrequency(""),e.PainLimitation("2"));break;case"PreviousStatin":e.PreviousStatinViewed(!0),"true"==t&&e.PreviousStatin("")}""!=o&&pager.navigate(o)},e.TimeGroup=ko.pureComputed(function(){var a=new Date;a.setFullYear(e.YearofStatin(),e.MonthofStatin(),1);var t=new Date;t.setFullYear(e.YearofSymptoms(),e.MonthofSymptoms(),1);var o=t.getTime()<a.getTime()?!0:!1,r=o?0:1,n=appmodel.ResultData.TimeWarning[r];return n},e),e.GenderGroup=ko.pureComputed(function(){var a=e.Gender(),t=appmodel.ResultData.Gender[a];return t},e),e.AgeGroup=ko.pureComputed(function(){var a=e.Age(),t=appmodel.ResultData.Age[a];return t},e),e.RaceGroup=ko.pureComputed(function(){var a=e.Race(),t=appmodel.ResultData.Race[a];return t},e),e.PainSymptomsGroup=ko.pureComputed(function(){var a=e.painSymptoms()?1:0,t=appmodel.ResultData.PainSymptoms[a];return t},e),e.PainAreaGroup=ko.pureComputed(function(){var a=e.painArea()?1:0,t=appmodel.ResultData.PainArea[a];return t},e),e.CKValueGroup=ko.pureComputed(function(){var a="";switch(e.CKValue()){case"yes":a=0;break;case"no":a=1;break;case"unknown":a=2;break;default:a=2}var t=appmodel.ResultData.CKStatus[a];return t},e),e.RiskFactorsGroup=ko.pureComputed(function(){var a=e.RiskFactors().length>0?1:0,t=appmodel.ResultData.RiskFactor[a];return t},e),e.SecondaryCausesGroup=ko.pureComputed(function(){var a=e.SecondaryCauses().length>0?0:1,t=appmodel.ResultData.SecondaryCause[a];return t},e),e.NextStepsGroup=ko.pureComputed(function(){return $value=[],"severe"==e.SymptomSeverity()&&$value.push(appmodel.Data.nextSteps[1]),$value.push(appmodel.Data.nextSteps[0]),("severe"==e.SymptomSeverity()||"yes"==e.CKValue()||"unknown"==e.CKValue())&&$value.push(appmodel.Data.nextSteps[2]),e.SecondaryCauses().length>0&&$value.push(appmodel.Data.nextSteps[5]),"mild"==e.SymptomSeverity()&&$value.push(appmodel.Data.nextSteps[6]),$value},e),e.RecomendationDisabled=function(){return R=!0,0!=appmodel.CurrentStatin()&&"unknown"!=e.SymptomSeverity()&&(R=!1),R}}function viewModel(){var e=this;e.Data=data,e.FormData=formData,e.ResultData=resultTable,e.Groups=["Hepatitis C Protease Inhibitors","HIV Protease Inhibitors","Strong CYP3A4 Inhibitors","Other"],e.Grouping=ko.observable(),e.StatinSelection=ko.observable(0),e.CharacteristicSelection=ko.observable(0),e.SecondaryReactions=ko.observableArray([]),e.SecondaryReactionsRefactor=ko.observableArray([]),e.SecondaryReactionsRefactorHighlighted=ko.observableArray([]),e.SecondaryReactionsCompare=ko.observableArray([]),e.SecondaryReactionsCompareRefactor=ko.observableArray([]),e.SecondaryReactionsCompareRefactorHighlighted=ko.observableArray([]),e.CurrentStatin=ko.observable(0),e.SecondaryReactionsRefactor=ko.observableArray([]),e.SecondaryMedications=ko.observableArray([]),e.SecondaryMedicationsIds=ko.observableArray([]),e.SecondaryMedications.subscribe(function(){e.SecondaryMedicationsIds([]);for(var a in e.SecondaryMedications())e.SecondaryMedicationsIds.push(e.SecondaryMedications()[a].id);e.CollectInteractedSelectedDrugs(e.SecondaryReactionsRefactorHighlighted,e.SecondaryReactionsRefactor,e.SecondaryMedicationsIds),e.SecondaryMedicationAlertUpdate()}),e.SelectedSecondaryDrugs=ko.observableArray([]),e.SecondaryMedicationsStatinCompare=ko.observableArray([]),e.SelectedSecondaryDrugsIds=ko.observableArray([]),e.SelectedSecondaryDrugs.subscribe(function(){e.SelectedSecondaryDrugsIds([]);for(var a in e.SelectedSecondaryDrugs())e.SelectedSecondaryDrugsIds.push(e.SelectedSecondaryDrugs()[a].id);e.CollectInteractedSelectedDrugs(e.SecondaryReactionsCompareRefactorHighlighted,e.SecondaryReactionsCompareRefactor,e.SelectedSecondaryDrugsIds),e.SelectedSecondaryDrugsAlertUpdate()}),e.FollowUp=ko.observable(new followUpObject),e.Form=ko.observable(new formObject),e.Doseage=ko.observableArray([]),e.StatinSelection.subscribe(function(){e.SecondaryReactionsCompare([]),e.SecondaryReactionsCompare(e.Data.statins[e.StatinSelection()].reactions),e.SecondaryReactionsCompareRefactor(e.Data.statins[e.StatinSelection()].groupedReactions),e.CollectInteractedSelectedDrugs(e.SecondaryReactionsCompareRefactorHighlighted,e.SecondaryReactionsCompareRefactor,e.SelectedSecondaryDrugsIds),e.SelectedSecondaryDrugsAlertUpdate()}),e.CurrentStatin.subscribe(function(){e.dosageBind(),e.SecondaryReactions([]),e.SecondaryReactions(e.Data.statins[e.CurrentStatin()].reactions),e.SecondaryReactionsRefactor([]),e.SecondaryReactionsRefactor(e.Data.statins[e.CurrentStatin()].groupedReactions),e.CollectInteractedSelectedDrugs(e.SecondaryReactionsRefactorHighlighted,e.SecondaryReactionsRefactor,e.SecondaryMedicationsIds),e.Form().RecomendationDisabled(),e.SecondaryMedicationAlertUpdate()}),e.SecondaryMedicationWarning=ko.observable(!1),e.SecondaryMedicationError=ko.observable(!1),e.SecondaryMedicationAlertUpdate=function(){var a=e.SecondaryReactions(),t=!1,o=!1;for(var r in a)e.reactionMatchToDrug(a[r])&&("alert"==a[r].warningLevel&&(t=!0),"error"==a[r].warningLevel&&(o=!0));e.SecondaryMedicationWarning(t),e.SecondaryMedicationError(o)},e.CollectInteractedSelectedDrugs=function(a,t,o){a([]);var r=[];for(var n in t()){var i=t()[n],s=[];for(var c in i)e.reactionMatchDrugRefactor(i[c],o)&&s.push(i[c]);r.push(s)}a(r)},e.SelectedSecondaryDrugsWarning=ko.observable(!1),e.SelectedSecondaryDrugsError=ko.observable(!1),e.SelectedSecondaryDrugsAlertUpdate=function(){var a=e.SecondaryReactionsCompare(),t=!1,o=!1;for(var r in a)e.reactionMatchToDrugCompare(a[r])&&("alert"==a[r].warningLevel&&(t=!0),"error"==a[r].warningLevel&&(o=!0));e.SelectedSecondaryDrugsWarning(t),e.SelectedSecondaryDrugsError(o)},e.clearEvalData=function(){e.Form().Charactisitics(),e.Form().Gender(""),e.Form().Race(""),e.Form().Age(""),e.CurrentStatin(0),e.Form().Frequency(""),e.Form().Timeday(""),e.Form().MonthofStatin(""),e.Form().YearofStatin(""),e.Form().PreviousStatinViewed(!1),e.Form().PreviousStatin(""),e.Form().CKStatus(!1),e.Form().CKUpdate(""),e.Form().MonthofSymptoms(""),e.Form().YearofSymptoms(""),e.Form().SymptomSeverityViewed(!1),e.Form().SymptomSeverity("unknown"),e.Form().RiskFactorsViewed(!1),e.Form().RiskFactors([]),e.Form().SecondaryMedicationsViewed(!1),e.SecondaryMedications([]),e.CharacteristicSelection([]),e.Form().SecondaryCausesViewed(!1),e.Form().SecondaryCauses([]),e.Form().PainLevel([]),e.Form().PainFrequency([]),e.StatinSelection(0)},e.clearAllData=function(){e.clearEvalData(),e.SelectedSecondaryDrugs([])},e.SMDC_Clear=function(){e.SelectedSecondaryDrugs([])},e.dosageBind=function(){e.Doseage([]);var a=e.CurrentStatin(),t=e.Data.statins[a].dose;for(var o in t)e.Doseage.push(t[o])},e.recomendationForm=function(){};for(var a in e.Data.statins){var t=e.Data.statins[a].reactions,o=[],o=[];for(var r in t)t[r].info=e.Data.secondaryDrugs[t[r].id],t[r].info.categoryOrder=e.Groups.indexOf(t[r].info.category),void 0==o[t[r].info.category]&&(o[t[r].info.category]=[]),o[t[r].info.category].push(t[r]);e.Data.statins[a].groupedReactions=[];for(var n in o)o[n].sort(function(e,a){var t=e.info.name,o=a.info.name;return o>t?-1:t>o?1:0}),e.Data.statins[a].groupedReactions.push(o[n]);e.Data.statins[a].groupedReactions.sort(function(e,a){var t=e[0].info.category,o=a[0].info.category;return o>t?-1:t>o?1:0}),t.sort(function(e,a){var t=e.info.name,o=a.info.name;return o>t?-1:t>o?1:0}),t.sort(function(e,a){var t=e.info.categoryOrder,o=a.info.categoryOrder;return o>t?-1:t>o?1:0})}e.reactionMatchToDrug=function(a){return e.SecondaryMedicationsIds.indexOf(a.id)>=0},e.reactionMatchToDrugCompare=function(a){return e.SelectedSecondaryDrugsIds.indexOf(a.id)>=0},e.reactionMatchDrugRefactor=function(e,a){return a().indexOf(e.id)>=0},e.active=ko.observable(0),e.selected=ko.computed({read:function(){return e.active().toString()},write:function(a){e.active(parseInt(a,10))},owner:e}),e.setStatinSelectionandNavigate=function(a){e.StatinSelection(a.id),pager.navigate("#!/content/drugComparison/compare/singleStatin")},e.slideInPage=function(e,a){$(e.element).slideDown(1e3,a)},e.slideOutPage=function(e,a){var t=$(e.element);e.pageHiddenOnce?(t.slideUp(1e3,function(){t.hide()}),a&&a()):(e.pageHiddenOnce=!0,t.hide())}}function goBack(){window.history.back()}function followUpObject(){function e(){var e="%0D%0A",a=e+e,t="DEMOGRAPHICS"+e;if(void 0!=appmodel.Form().Gender()&&(t+="Sex - "+genderOption[appmodel.Form().Gender()].Text+e),void 0!=appmodel.Form().Race()&&(t+="Race - "+raceOption[appmodel.Form().Race()].Text+e),t+=""+e,t+="CURRENT STATIN PRESCRIPTION "+e,appmodel.CurrentStatin()&&(t+=appmodel.Data.statins[appmodel.CurrentStatin()].name+e),appmodel.Form().SelectedDose()){var o=appmodel.Form().SelectedDose();t+="Dosage - "+o.value+" ("+o.name+")"+e}if(void 0!=appmodel.Form().Frequency()&&(t+="Frequency - "+frequencyOption[appmodel.Form().Frequency()].Text),void 0!=appmodel.Form().Timeday()&&(t+=" ("+timedayOption[appmodel.Form().Timeday()].Text+")"+a),appmodel.Form().YearofStatin()){var r=appmodel.Form().MonthofStatin();r||(r=0),t+="Started Current Statin - ";var n=new Date;options={year:"numeric",month:"long"},n.setFullYear(appmodel.Form().YearofStatin(),r,1),t+=n.toLocaleDateString("en",options)+e}if(void 0!=appmodel.Form().PreviousStatin()){var s="";s=1==appmodel.Form().PreviousStatin()?"Yes":"No",t+="Muscle pain on previous statin? -"+s+a}if(t+="RHABDOMYOLYSIS ASSESSMENT "+e,void 0!=appmodel.Form().CKValue()){var c="";switch(appmodel.Form().CKValue()){case"yes":c="Yes";break;case"no":c="No";break;case"unknown":c="Don't Know";break;default:c="Don't Know"}t+="Patient's CK above 5x the ULN - "+c+a}if(appmodel.Form().RiskFactors().length>0&&(t+="STATIN INTOLERANCE RISK FACTOR(S) - ",t+=appmodel.Form().RiskFactors().length+" Selected"+e),appmodel.Form().SecondaryCauses().length>0&&(t+="POSSIBLE NON-STATIN CAUSE(S) FOR MUSCLE SYMPTOM(S) - ",t+=appmodel.Form().SecondaryCauses().length+" Selected"+e),appmodel.SecondaryMedications().length>0){t+="PATIENTâ€™S SECONDARY MEDICATION(S) "+e;var l="";if(appmodel.SecondaryMedications().length<4){for(i=0;i<appmodel.SecondaryMedications().length;i++)l+="- %20"+appmodel.SecondaryMedications()[i].name+e;t+=l+e}else t+=appmodel.SecondaryMedications().length+" Selected"+e}return t+=""+e}var a=this;a.Page1Selection=ko.observable(""),a.Page1SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page1Selection()&&(e="true"==a.Page1Selection()?"selected-btn1":"selected-btn2"),e},a);var a=this;a.Page2Selection=ko.observable(""),a.Page2SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page2Selection()&&(e="true"==a.Page2Selection()?"selected-btn1":"selected-btn2"),e},a);var a=this;a.Page3Selection=ko.observable(""),a.Page3SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page3Selection()&&(e="true"==a.Page3Selection()?"selected-btn1":"selected-btn2"),e},a);var a=this;a.Page4Selection=ko.observable(""),a.Page4SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page4Selection()&&(e="true"==a.Page4Selection()?"selected-btn1":"selected-btn2"),e},a);var a=this;a.Page5Selection=ko.observable(""),a.Page5SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page5Selection()&&(e="true"==a.Page5Selection()?"selected-btn1":"selected-btn2"),e},a);var a=this;a.Page6Selection=ko.observable(""),a.Page6SelectionClass=ko.pureComputed(function(){var e="";return""!=a.Page6Selection()&&(e="true"==a.Page6Selection()?"selected-btn1":"selected-btn2"),e},a),a.SetValue=function(e,t,o){switch(e){case"Page1Selection":a.Page1Selection(t);break;case"Page2Selection":a.Page2Selection(t);break;case"Page3Selection":a.Page3Selection(t);break;case"Page4Selection":a.Page4Selection(t);break;case"Page5Selection":a.Page5Selection(t);break;case"Page6Selection":a.Page6Selection(t)}""!=o&&pager.navigate(o)},$("#email").click(function(){this.href="mailto:you@yourdomain.com?subject=Statin Intolerance Evaluation&body=",this.href+=e()})}function countCSSRules(){function e(e){var o=0;if(e&&e.cssRules){for(var r=0,n=e.cssRules.length;n>r;r++)e.cssRules[r].selectorText&&(o+=e.cssRules[r].selectorText.split(",").length);t+="\nFile: "+(e.href?e.href:"inline <style> tag"),t+="\nRules: "+e.cssRules.length,t+="\nSelectors: "+o,t+="\n--------------------------",o>=4096&&(a+="\n********************************\nWARNING:\n There are "+o+" CSS rules in the stylesheet "+e.href+" - IE will ignore the last "+(o-4096)+" rules!\n")}}var a="",t="";if(document.styleSheets){for(var o=0;o<document.styleSheets.length;o++)e(document.styleSheets[o]);console.log(t),console.log(a)}}var appmodel=new viewModel;pager.Href.hash="#!/",pager.extendWithPage(appmodel),ko.bindingHandlers.grouping={init:function(element,valueAccessor,allBindings,viewModel,bindingContext){var values=ko.unwrap(valueAccessor()),parameter=eval("bindingContext.$parent.Grouping"),groupValue=parameter();groupValue!=values.data.info.category&&(parameter(values.data.info.category),$(element).before("<tr class='seperator'><td colspan='"+values.columns+"' class='seperator'>"+values.data.info.category+"</td></tr>"))}},ko.applyBindings(appmodel),pager.start();var path="#!/";pager.navigate(path);var tabchange=function(e){$(".header .tabs li").removeClass("selected"),$(".footer .tabs li").removeClass("selected");var a="#"+e.page.currentId+"-Tab";$(a).addClass("selected")},loadTopofPage=function(){$("html, body").animate({scrollTop:0})},panelScrollTop=function(e,a){var t=$(a.currentTarget).parent().parent().offset().top-50,o=$(window).scrollTop(),r=o>=t?t:0;$(window).scrollTop(r)},pageScrollTop=function(){$(window).scrollTop(0)},panelVisibleToggle=function(e){var a=e+" .collapsable-panel";$(a).toggle()},panelHide=function(e,a){$(a.currentTarget).parents(".collapsable-panel").hide(),$(a.currentTarget).parents(".selected").removeClass("selected")},panelShow=function(e){var a=e+" .collapsable-panel";$(a).show()},listchange=function(){var e=location.hash;$("#followUpList li,#guidelineList li, #compareTabs li,#evalutorTabs li").removeClass("selected"),$("#followUpList li,#guidelineList li, #compareTabs li,#evalutorTabs li").each(function(){var a=$(this);a[$("a",this).attr("href")===e?"addClass":"removeClass"]("selected")})};countCSSRules();