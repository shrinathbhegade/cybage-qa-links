!function(t){t.acc=t.acc||{},t.acc.app=t.acc.app||{},t.acc.service=t.acc.service||{};t=t.acc;t.app.versionPrefix="acc_stage",t.userGuid="",t.appIdentifier="org.acc.treathf",t.notificationUserGuid="a7b3e523-3f8d-4b33-a1c4-ec9e9aa3a5bb",t.iOSStoreUrl="https://itunes.apple.com/us/developer/american-college-of-cardiology/id502174543#",t.androidStoreUrl="https://play.google.com/store/apps/dev?id=5189912010956845696&hl=en",t.appVersionNumber="2.1",t.baseUrl="https://tools.stage.acc.org/TreatHF/",t.notificationUrl="https://tools.stage.acc.org/ACCUtility.Web/Notification",t.gdprBannerUrl="https://www.acc.org",t.firebaseDynamicLink={api:"https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=AIzaSyAw9sfRFTDdMJ89__5-epdrNHHIg4Ur06E",domainUriPrefix:"https://accthf.page.link",link:t.baseUrl+"#!/content/staticadviceviewpage"}}(window),function(t){var e={};e.isNativeApplication=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://"),e.deviceType="iPod"==navigator.userAgent.match(/iPod/i)?"iPod":"iPad"==navigator.userAgent.match(/iPad/i)?"iPad":"iPhone"==navigator.userAgent.match(/iPhone/i)?"iPhone":"Android"==navigator.userAgent.match(/Android/i)?"Android":"BlackBerry"==navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":"Desktop",e.isIPad="iPad"==e.deviceType,e.isIPhone="iPhone"==e.deviceType,e.isAndroid="Android"==e.deviceType,t.Lookup=e}(window),function(){var t={findAndGetValue:function(t,e){return t().filter(function(t){return t.id()==e})[0]},getSelectedOptions:function(t){return t().filter(function(t){return t.isSelected()})}};window.UtilityFunctions=t}(),function(t){function e(){}var i="HFPA_LOCAL_DATA";e.prototype.setLocalStorageData=function(t){localStorage.setItem(i,t)},e.prototype.getLocalStorageData=function(){return localStorage.getItem(i)},e.prototype.getNotificationData=function(){return JSON.parse(this.getLocalStorageData())},t.LocalStorageService=e}(window),function(t){function e(){}var i,a="HFPA_SESSION_DATA";e.prototype.setSessionStorageData=function(t){var e=JSON.parse(t);delete e.copytext,delete e.analytics,t=JSON.stringify(e),sessionStorage.setItem(a,t)},e.prototype.getSessionStorageData=function(){return sessionStorage.getItem(a)},e.prototype.setOriginalJSONdata=function(t){i=t},e.prototype.resetApp=function(){this.setSessionStorageData(i)},e.prototype.saveGDMTData=function(t){var e=this.getSessionStorageData(),e=JSON.parse(e);e.GDMT=t,this.setSessionStorageData(JSON.stringify(e))},e.prototype.savePatientData=function(t){var e=this.getSessionStorageData(),e=JSON.parse(e);e.patient=t,this.setSessionStorageData(JSON.stringify(e))},e.prototype.getGDMTData=function(){var t=this.getSessionStorageData();return JSON.parse(t).GDMT},e.prototype.getPatientData=function(){var t=this.getSessionStorageData();return JSON.parse(t).patient},e.prototype.saveExceptionData=function(t){var e=this.getSessionStorageData(),e=JSON.parse(e);e.exception=t,this.setSessionStorageData(JSON.stringify(e))},e.prototype.getExceptionData=function(){var t=this.getSessionStorageData();return JSON.parse(t).exception},e.prototype.getcontraindicationsData=function(){var t=this.getSessionStorageData();return JSON.parse(t).contraindications},e.prototype.saveContraindicationsData=function(t){var e=this.getSessionStorageData(),e=JSON.parse(e);e.contraindications=t,this.setSessionStorageData(JSON.stringify(e))},e.prototype.getCopyTextData=function(){var t=i;return JSON.parse(t).copytext},e.prototype.getAnalyticsData=function(){var t=i;return JSON.parse(t).analytics},t.SessionStorageService=e}(window),function(a,t){function e(){}e.prototype.hfLogic_jsonURL="assets/data/hf_logic.json",e.prototype.jsonURL="assets/data/data.json?v=5",e.prototype.sessionStorageService=new t,e.prototype.loadJson=function(t){function e(){0==--i&&t()}var i=2;this.loadDataJson(e),this.loadHFLogicJson(e)},e.prototype.loadDataJson=function(e){var i=this;$.getJSON(i.jsonURL,function(t){i.sessionStorageService.setSessionStorageData(JSON.stringify(t)),i.sessionStorageService.setOriginalJSONdata(JSON.stringify(t)),e&&e()}).fail(function(t){a.logError("Error on file "+i.jsonURL)})},e.prototype.loadHFLogicJson=function(e){var i=this;$.getJSON(i.hfLogic_jsonURL,function(t){i.hfLogicData=t.hf_logic,e&&e()})},a.JSONService=e}(window,window.SessionStorageService),function(t,a,e){function i(){}i.instance=null,i.prototype.setGDMTData=function(t){(new a).saveGDMTData(t)},i.prototype.setPatientData=function(t){(new a).savePatientData(t)},i.prototype.setNotificationData=function(t){(new e).setLocalStorageData(t)},i.prototype.getGDMTData=function(){return(new a).getGDMTData()},i.prototype.getPatientData=function(){return(new a).getPatientData()},i.prototype.setExceptionData=function(t){(new a).saveExceptionData(t)},i.prototype.getExceptionData=function(){return(new a).getExceptionData()},i.prototype.setContraindicationsData=function(t){(new a).saveContraindicationsData(t)},i.prototype.getContraindicationsData=function(){return(new a).getcontraindicationsData()},i.prototype.resetApp=function(){(new a).resetApp()},i.prototype.getNotificationData=function(){return(new e).getNotificationData()},i.prototype.getCopytext=function(t){return(new a).getCopyTextData()[t]},i.prototype.getIdByCopyText=function(t){var e,i=(new a).getCopyTextData();for(e in i)if(t===i[e])return e;return""},i.prototype.getAnalyticsData=function(){return(new a).getAnalyticsData()},i.prototype.getHFLogicModel=function(){return HFLogicModel.getInstance()},i.getInstance=function(){return i.instance=i.instance?i.instance:new i},t.AppModel=i}(window,window.SessionStorageService,window.LocalStorageService),function(t){function e(){}e.instance=null,e.prototype.getModIndList=function(o,t){var a,n={},e=o.gdmtVM.ACE_ARB.selectedOpt(),d=(n.ACEI="ACEI"==e,n.ARB="ARB"==e,n.BB=(a=o.gdmtVM.beta_blocker.drugs.selectedOpt(),o.gdmtVM.beta_blocker.drugs.options().filter(function(t,e,i){return t.id()==a})[0].value()),"none"!=S()&&S()?"yes":"no"),r="none"!=x()&&x()?"yes":"no",c="none"!=o.gdmtVM.beta_blocker.ques()[0].selectedOpt()&&o.gdmtVM.beta_blocker.ques()[0].selectedOpt()?"yes":"no",s=o.patientVM.NYHA.selectedOpt(),p=o.patientVM.LVEF.selectedOpt(),i=this.hfLogicData.filter(function(t,e,i){return!(t.GDMTselection.ACEI||t.GDMTselection.ARB||t.GDMTselection.BB)||!(t.GDMTselection.ACEI&&n.ACEI!=t.GDMTselection.ACEI||t.GDMTselection.ARB&&n.ARB!=t.GDMTselection.ARB||t.GDMTselection.BB&&n.BB!=t.GDMTselection.BB)});i=(i=(i=(i=(i=i.filter(function(t,e,i){return"neutral"==t.ARB_sacubatril||d==t.ARB_sacubatril})).filter(function(t,e,i){return"neutral"==t.ACE_ARB_BP||r==t.ACE_ARB_BP})).filter(function(t,e,i){return"neutral"==t.BB_HeartRate||c==t.BB_HeartRate})).filter(function(t,e,i){if(""==t.NYHA)return!0;var a=s;t.RASInhibitor&&t.RASInhibitor.none&&(a=o.patientVM.NYHA.selectedOpt());var n,d=!1;for(n in i=t.NYHA.split("_"))if(i[n]==a){d=!0;break}return d})).filter(function(t,e,i){if(""==t.LVEF)return!0;var a,n=!1;for(a in i=t.LVEF.split("_"))if(i[a]==p){n=!0;break}return n});for(var l="Neither"===o.gdmtVM.ACE_ARB.selectedViewOpt(),u=(i=i.filter(function(t){return!t.RASInhibitor||l===t.RASInhibitor.none}),o.patientVM.additionalMedications.options()),g=(i=i.filter(function(t){var e=!0,i=t.advice.additionalMed;return e=i?u.some(function(t){return t.id()===i.key&&t.isSelected()===i.value}):e}),[]),b=0;b<i.length;b++)for(var _=i[b].Indication,h=0;h<_.length;h++)g.push(_[h].id);for(var f=[],b=0;b<i.length;b++)for(var v=i[b].Modifier,h=0;h<v.length;h++)f.push(v[h].id);for(var A=[],b=0;b<i.length;b++){var y=i[b].advice;y&&A.push({id:i[b].id,advice:y,modis:i[b].Modifier,indis:i[b].Indication})}if(l&&"NYHAI"!==s&&"NYHAUN"!==s){for(var g=[],f=[],m=o.patientVM.indication.options(),C=o.patientVM.modifier.options(),b=0;b<m.length;b++)g.push(m[b].id());for(b=0;b<C.length;b++)"m1"!==C[b].id()&&f.push(C[b].id())}function S(){var a=o.gdmtVM.ACE_ARB.selectedOpt();return!(!a||"Neither"==a||"ARNI"==a)&&o.gdmtVM.ACE_ARB.options().filter(function(t,e,i){return t.id()==a})[0].que()[0].selectedOpt()}function x(){var a=o.gdmtVM.ACE_ARB.selectedOpt();return!(!a||"Neither"==a||"ARNI"==a)&&o.gdmtVM.ACE_ARB.options().filter(function(t,e,i){return t.id()==a})[0].que()[1].selectedOpt()}t&&t({indicationlist:g,modifierlist:f,advicelist:A})},e.prototype.getAdvice=function(t){},e.getInstance=function(){return e.instance=e.instance?e.instance:new e},t.HFLogicModel=e}(window,window.UtilityFunctions),function(e,d){function t(){}function o(t,e){$.ajax({dataType:"json",url:t,timeout:3e4,success:function(t){e&&e(t)},error:function(t){console.log("ERROR"),e&&e(null)}})}var r=e.acc.notificationUserGuid,c=e.acc.notificationUrl,s=e.acc.appIdentifier,p=e.acc.appVersionNumber,l="iPad"==e.Lookup.deviceType||"iPhone"==e.Lookup.deviceType?"iOS":"Android"==e.Lookup.deviceType?"Android":"Web",u=(t.prototype.appStoreUri="",{iOS:"1",Android:"2",Web:"3",All:"4"}),g="1",b="2",_=d.getInstance().getNotificationData();t.prototype.callNotification=function(e){function i(){var t;2<=n&&((t=a).version=p,_=_||{},t.critical&&(_.critical=t.critical),t.noncritical&&(_.noncritical=t.noncritical),(_=_.version?_:t).version&&_.version!=t.version&&(_=t),d.getInstance().setNotificationData(JSON.stringify(_)),e)&&e()}var a={critical:"",noncritical:""},n=0;o(c+"/"+s+"/"+p+"/"+u[l]+"/"+g+"/"+!0+"/"+r,function(t){n++,a.critical=t,i()}),o(c+"/"+s+"/"+p+"/"+u[l]+"/"+b+"/"+!0+"/"+r,function(t){n++,a.noncritical=t,i()})},t.prototype.getNonCriticalByOsType=function(){var i;return _.noncritical?(i=Number(p),_.noncritical.filter(function(t,e){return(t.AppVersionNumber>=i||0==t.AppVersionNumber)&&(t.OsType==u[l]||t.OsType==u.All)}).sort(function(t,e){t=Date.parse(t.EffectiveDate);return Date.parse(e.EffectiveDate).compareTo(t)}).filter(function(t,e,i){t=Date.parse(t.EffectiveDate);return 0<=Date.parse(new Date).compareTo(t)}).filter(function(t,e,i){t=Date.parse(t.ExpirationDate);return!t||Date.parse(new Date).compareTo(t)<=0})):[]},t.prototype.getCriticalByOsType=function(){var i,t;return _.critical?(i=Number(p),t=(t=(t=(t=_.critical.filter(function(t,e){return(t.AppVersionNumber>=i||0==t.AppVersionNumber)&&(t.OsType==u[l]||t.OsType==u.All)})).sort(function(t,e){t=Date.parse(t.EffectiveDate);return Date.parse(e.EffectiveDate).compareTo(t)})).filter(function(t,e,i){t=Date.parse(t.EffectiveDate);return 0<=Date.parse(new Date).compareTo(t)})).filter(function(t,e,i){t=Date.parse(t.ExpirationDate);return!t||Date.parse(new Date).compareTo(t)<=0}),this.appStoreUri=1==u[l]?e.acc.iOSStoreUrl:2==u[l]?e.acc.androidStoreUrl:"",t):[]},e.notification=new t}(window,window.AppModel),function(i,a){function t(){}var e={evaluate:"evaluate-Tab",advice:"advice-Tab",drugs:"drugs-Tab"},n={resources:"resources-Tab",about:"about-Tab",disclaimer:"disclaimer-Tab",news:"news-Tab"},d=[{url:"#!/content/evaluate"},{url:"#!/content/advice/baselinetherapy"},{url:"#!/content/resources"},{url:"#!/content/disclaimer"},{url:"#!/content/about"},{url:"#!/content/news"},{url:"#!/content/drugs"},{url:"#!/content/drugs/view1"},{url:"#!/content/drugs/view2"},{url:"#!/content/staticadviceviewpage"}];t.getParams=function(){var t=window.location.hash.split("?")[1],e={};return t&&t.split("&").forEach(function(t){t=t.split("=");e[t[0]]=decodeURIComponent(t[1])}),e},t.prototype.routeGuard=function(t){a(window).bind("hashchange",function(t){var e=window.location.hash.split("?")[0];0==a.grep(d,function(t){return t.url==e}).length&&i.navigate("#!/content/staticadviceviewpage")})},t.prototype.afterShow=function(t){t=t.page.currentId;!t&&navigator&&navigator.app.exitApp(),a(window).scrollTop(0),"evaluate"!=(t="view1"==t||"view2"==t?"drugs":t)&&"advice"!=t&&"drugs"!=t||(this.unselectHeadTabs(),this.unselectAuxTabs(),a("#"+e[t]).addClass("selected"),a("#"+e[t]).addClass("active")),"resources"!=t&&"about"!=t&&"resources"!=t&&"disclaimer"!=t&&"news"!=t||(this.unselectHeadTabs(),this.unselectAuxTabs(),a("#"+n[t]).addClass("selected"))},t.prototype.unselectAuxTabs=function(){for(var t in n)a("#"+n[t]).removeClass("selected")},t.prototype.unselectHeadTabs=function(){for(var t in e)a("#"+e[t]).removeClass("selected"),a("#"+e[t]).removeClass("active")},window.Routing=t}((window,pager),$),function(t){function e(){}e.prototype.init=function(t){var i=this;this.databind=t,this.databind.drugSelected=ko.observable(""),this.databind.drugName=ko.observable(),this.databind.drugInitiation=ko.observable(),this.databind.drugTitration=ko.observable(),this.databind.drugMonitoring=ko.observable(),this.databind.drugGuidelines=ko.observable(),this.databind.guidelineHeading=ko.observable(),this.databind.hideAccordion=ko.observable(!1),this.databind.otherDrugReferences=ko.observableArray([]),this.databind.showSubTitle=ko.observable(!1),this.databind.showQuickReferences=ko.observable(""),this.databind.onDrugClick=function(t,e){i.onDrugClick(t)},this.databind.onBackClick=function(){i.onAccordionClick({id:"divDrugReference",type:"ACC_COLLAPSE_ALL"}),pager.navigate("#!/content/drugs/view1")},this.databind.accordionClick=function(t,e){("idICD"==i.databind.drugSelected()||"idCRT"==i.databind.drugSelected())&&(t.type="ACC_PANEL_ICD_CRT"),i.onAccordionClick(t,e)},this.onAccordionClick({id:"divDrugReference",type:"ACC_COLLAPSE_ALL"})},e.prototype.onAccordionClick=function(t,e){if("ACC_PANEL_ICD_CRT"==t.type){for(var i=(o=$(e.currentTarget.parentElement)).find(".collapsable-panel"),a=(o.hasClass("selected")?o.removeClass("selected"):o.addClass("selected"),i.slideToggle("slow"),$("#"+t.id).find(".arrow-icon")),n=!1,d=0;d<a.length;d++)if($(a[d]).hasClass("selected")){n=!0;break}i=$("#"+t.id);$(i).find(".acc-collapse-all-text").hide(),$(i).find(".acc-expend-all-text").hide()}if("ACC_PANEL"==t.type){for(var o,i=(o=$(e.currentTarget.parentElement)).find(".collapsable-panel"),a=(o.hasClass("selected")?o.removeClass("selected"):o.addClass("selected"),i.slideToggle("slow"),$("#"+t.id).find(".arrow-icon")),n=!1,d=0;d<a.length;d++)if($(a[d]).hasClass("selected")){n=!0;break}(n?(i=$("#"+t.id),$(i).find(".acc-expend-all-text").hide(),$(i).find(".acc-collapse-all-text")):(i=$("#"+t.id),$(i).find(".acc-collapse-all-text").hide(),$(i).find(".acc-expend-all-text"))).show()}"ACC_COLLAPSE_ALL"==t.type&&(i=$("#"+t.id),$(i).find(".arrow-icon").removeClass("selected"),i.find(".collapsable-panel").slideUp(),$(i).find(".acc-collapse-all-text").hide(),$(i).find(".acc-expend-all-text").show()),"ACC_EXPAND_ALL"==t.type&&(i=$("#"+t.id),$(i).find(".arrow-icon").filter(function(){return!$(this).closest(".hide").length}).addClass("selected"),i.find(".collapsable-panel").slideDown(),$(i).find(".acc-expend-all-text").hide(),$(i).find(".acc-collapse-all-text").show()),"ACC_EXPAND_ALL_ICD_CRT"==t.type&&(i=$("#"+t.id),$(i).find(".arrow-icon").addClass("selected"),i.find(".collapsable-panel").slideDown(0),$(i).find(".acc-collapse-all-text").hide(),$(i).find(".acc-expend-all-text").hide()),"ACC_COLLAPSE_ALL_WITHOUT_ANIM"==t.type&&(i=$("#"+t.id),$(i).find(".arrow-icon").removeClass("selected"),i.find(".collapsable-panel").slideUp(0),$(i).find(".acc-collapse-all-text").hide(),$(i).find(".acc-expend-all-text").show())},e.prototype.onPagerAfterShow=function(t){var e,i=window.location.hash.split("?")[0];-1!=i.indexOf("content/drugs/view2")&&(e=Routing.getParams(),this.onDrugClick(e)),-1!=i.indexOf("content/resources")&&this.onAccordionClick({id:"idResourceAccordion",type:"ACC_COLLAPSE_ALL_WITHOUT_ANIM"})},e.prototype.onDrugClick=function(t){$("#guidlinesList li").each(function(t){$(this).removeClass("selected")}),$("#"+t.id).addClass("selected"),this.showDrug(t.id)},e.prototype.showDrug=function(t){var e=this;e.databind.hideAccordion(!1),e.databind.otherDrugReferences([]),e.databind.showSubTitle(!1),e.databind.showQuickReferences(""),e.databind.drugSelected(t),"idACEI"==t?(e.databind.drugName(e.databind.getCopyText("cp_ace_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_ace_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_ace_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_ace_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_ace_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idARBI"==t?(e.databind.drugName(e.databind.getCopyText("cp_arb_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_arb_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_arb_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_arb_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_arb_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idBetaBlocker"==t?(e.databind.drugName(e.databind.getCopyText("cp_bb_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_bb_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_bb_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_bb_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_bb_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idDiuretics"==t?(e.databind.drugName(e.databind.getCopyText("cp_diuretic_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_diuretic_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_diuretic_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_diuretic_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_diuretic_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idImmunization"==t?(e.databind.drugName(e.databind.getCopyText("cp_immunization_drug_heading")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_immunization_gui_heading"),text:e.databind.getCopyText("cp_immunization_gui_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_immunization_HP_heading"),text:e.databind.getCopyText("cp_immunization_HP_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_immunization_AIP_heading"),text:e.databind.getCopyText("cp_immunization_AIP_text")})):"idARNIs"==t?(e.databind.drugName(e.databind.getCopyText("cp_arni_drug_heading")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_initiation"),text:e.databind.getCopyText("cp_arni_drug_init")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_titration"),text:e.databind.getCopyText("cp_arni_drug_tit")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_monitoring"),text:e.databind.getCopyText("cp_arni_drug_mon")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_ci_cautions"),text:e.databind.getCopyText("cp_arni_ci_cautions")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_drug_gui_heading_arni"),text:e.databind.getCopyText("cp_arni_drug_gui")})):"idAldosteroneAntagonists"==t?(e.databind.drugName(e.databind.getCopyText("cp_aldosterone_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_aldosterone_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_aldosterone_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_aldosterone_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_aldosterone_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idHydralNitrates"==t?(e.databind.drugName(e.databind.getCopyText("cp_hydralazine_drug_heading")),e.databind.drugInitiation(e.databind.getCopyText("cp_hydralazine_drug_init")),e.databind.drugTitration(e.databind.getCopyText("cp_hydralazine_drug_tit")),e.databind.drugMonitoring(e.databind.getCopyText("cp_hydralazine_drug_mon")),e.databind.drugGuidelines(e.databind.getCopyText("cp_hydralazine_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idIvabridine"==t?(e.databind.drugName(e.databind.getCopyText("cp_ivabradine_drug_heading")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_initiation"),text:e.databind.getCopyText("cp_ivabradine_drug_init")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_titration"),text:e.databind.getCopyText("cp_ivabradine_drug_tit")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_monitoring"),text:e.databind.getCopyText("cp_ivabradine_drug_mon")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_ci_cautions"),text:e.databind.getCopyText("cp_ivabradine_ci_cautions")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_drug_gui_heading_arni"),text:e.databind.getCopyText("cp_ivabradine_drug_gui")})):"idICD"==t?(e.databind.hideAccordion(!0),e.databind.drugName(e.databind.getCopyText("cp_icd_drug_heading")),e.databind.drugGuidelines(e.databind.getCopyText("cp_icd_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idCRT"==t?(e.databind.hideAccordion(!0),e.databind.drugName(e.databind.getCopyText("cp_crt_drug_heading")),e.databind.drugGuidelines(e.databind.getCopyText("cp_crt_drug_gui")),e.databind.guidelineHeading(e.databind.getCopyText("cp_drug_gui_heading"))):"idSglt2"==t?(e.databind.drugName(e.databind.getCopyText("cp_sglt2_drug_heading")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_initiation"),text:e.databind.getCopyText("cp_sglt2_drug_init")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_titration"),text:e.databind.getCopyText("cp_sglt2_drug_tit")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_monitoring"),text:e.databind.getCopyText("cp_sglt2_drug_mom")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_ci_cautions"),text:e.databind.getCopyText("cp_sglt2_ci_cautions")})):"idGuideline"==t?(e.databind.drugName(e.databind.getCopyText("cp_gui_drug_guiding")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_HF_target"),text:e.databind.getCopyText("cp_gui_HF_target_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_target"),text:e.databind.getCopyText("cp_gui_drug_target_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_start_gdmt"),text:e.databind.getCopyText("cp_gui_start_gdmt_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_barriers"),text:e.databind.getCopyText("cp_gui_barriers_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_diligent"),text:e.databind.getCopyText("cp_gui_diligent_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_tolerability"),text:e.databind.getCopyText("cp_gui_tolerability_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_only"),text:e.databind.getCopyText("cp_gui_drug_only_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_transcatheter"),text:e.databind.getCopyText("cp_gui_transcatheter_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_focus"),text:e.databind.getCopyText("cp_gui_drug_focus_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_perspective"),text:e.databind.getCopyText("cp_gui_perspective_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_optimize"),text:e.databind.getCopyText("cp_gui_drug_optimize_text")})):"idSymptom"==t?(e.databind.showSubTitle(!0),e.databind.drugName(e.databind.getCopyText("cp_gui_drug_symptom")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_palliative"),text:e.databind.getCopyText("cp_gui_drug_palliative_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_transplant"),text:e.databind.getCopyText("cp_gui_drug_transplant_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_left"),text:e.databind.getCopyText("cp_gui_drug_left_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_investigational"),text:e.databind.getCopyText("cp_gui_drug_investigational_text")})):"idConsiderations"==t?(e.databind.drugName(e.databind.getCopyText("cp_gui_drug_considerations")),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_capitalize"),text:e.databind.getCopyText("cp_gui_drug_capitalize_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_consider"),text:e.databind.getCopyText("cp_gui_drug_consider_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_simplify"),text:e.databind.getCopyText("cp_gui_drug_simplify_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_cost"),text:e.databind.getCopyText("cp_gui_drug_cost_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_improve"),text:e.databind.getCopyText("cp_gui_drug_improve_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_educate"),text:e.databind.getCopyText("cp_gui_drug_educate_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_recommend"),text:e.databind.getCopyText("cp_gui_drug_recommend_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_behavioral"),text:e.databind.getCopyText("cp_gui_drug_behavioral_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_anticipate"),text:e.databind.getCopyText("cp_gui_drug_anticipate_text")}),e.databind.otherDrugReferences.push({heading:e.databind.getCopyText("cp_gui_drug_monitor"),text:e.databind.getCopyText("cp_gui_drug_monitor_text")})):"idReferences"==t?(e.databind.showQuickReferences("cp_gui_drug_references_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_drug_references"))):"idReferral"==t?(e.databind.showQuickReferences("cp_gui_drug_referral_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_drug_referral"))):"idTMVR"==t?(e.databind.showQuickReferences("cp_gui_tmvr_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_tmvr"))):"idAfricanPatient"==t?(e.databind.showQuickReferences("cp_gui_AA_Patients_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_AA_Patients"))):"idPathophysiologic"==t?(e.databind.showQuickReferences("cp_gui_pathophysiologic_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_pathophysiologic"))):"idAuthForm"==t&&(e.databind.showQuickReferences("cp_gui_auth_form_text"),e.databind.drugName(e.databind.getCopyText("cp_gui_auth_form"))),"idICD"==t||"idCRT"==t?this.onAccordionClick({id:"divDrugReference",type:"ACC_EXPAND_ALL_ICD_CRT"}):this.onAccordionClick({id:"divDrugReference",type:"ACC_COLLAPSE_ALL"})},t.DrugsView=e}(window),function(i,w){function t(){}t.prototype.init=function(t){var d=this;this.databind=t,this.databind.showRASContraindicationHeader=ko.observable(!0),this.databind.acearbAdvice=ko.observable(),this.databind.bbSummary=ko.observable(),this.databind.diureticSummary=ko.observable(),this.databind.acearbInitiation=ko.observable(),this.databind.acearbTitration=ko.observable(),this.databind.acearbMonitoring=ko.observable(),this.databind.acearbGuidelines=ko.observable(),this.databind.showBBExceptionBtn=ko.observable(!1),this.databind.showDiureticExceptionBtn=ko.observable(!1),this.databind.showAceArbExceptionBtn=ko.observable(!1),this.databind.betaBlockerAdvice=ko.observable(),this.databind.diureticAdvice=ko.observable(),this.databind.additionalTherapy=ko.observableArray(),this.databind.deviceTherapy=ko.observableArray(),this.databind.advice_RAAS_contraindication=ko.observable({}),this.databind.advice_RAAS_none_additional=ko.observable(null),this.databind.advice_BB_contraindication=ko.observable({}),this.databind.advice_diuretic_contraindication=ko.observable({}),this.databind.rasInsId=ko.observable(""),(window.adviceViewObj=this).databind.onViewInstructionClick=function(t){"acearb"==t?"ARNI"==window.adviceViewObj.databind.gdmtVM.ACE_ARB.selectedViewOpt()?pager.navigate("#!/content/drugs/view2?id=idARNIs"):"ARB"==window.adviceViewObj.databind.gdmtVM.ACE_ARB.selectedOpt()?pager.navigate("#!/content/drugs/view2?id=idARBI"):pager.navigate("#!/content/drugs/view2?id=idACEI"):"betablocker"==t?pager.navigate("#!/content/drugs/view2?id=idBetaBlocker"):"diuretics"==t?pager.navigate("#!/content/drugs/view2?id=idDiuretics"):-1<t.indexOf("arni")?pager.navigate("#!/content/drugs/view2?id=idARNIs"):-1<t.indexOf("ivabradine")?pager.navigate("#!/content/drugs/view2?id=idIvabridine"):-1<t.indexOf("aldosterone")?pager.navigate("#!/content/drugs/view2?id=idAldosteroneAntagonists"):-1<t.indexOf("hydralazine")?pager.navigate("#!/content/drugs/view2?id=idHydralNitrates"):-1<t.indexOf("icd")?pager.navigate("#!/content/drugs/view2?id=idICD"):-1<t.indexOf("crt")?pager.navigate("#!/content/drugs/view2?id=idCRT"):-1<t.indexOf("all_patient1")?pager.navigate("#!/content/drugs/view2?id=idReferral"):-1<t.indexOf("all_patient2")?pager.navigate("#!/content/drugs/view2?id=idSymptom"):-1<t.indexOf("guideline")?pager.navigate("#!/content/drugs/view2?id=idGuideline"):-1<t.indexOf("acei")?pager.navigate("#!/content/drugs/view2?id=idACEI"):-1<t.indexOf("arb")?pager.navigate("#!/content/drugs/view2?id=idARBI"):-1<t.indexOf("SGLT2i")&&pager.navigate("#!/content/drugs/view2?id=idSglt2")},this.exceptionData=ko.mapping.fromJS(window.AppModel.getInstance().getExceptionData()),this.databind.selectedExceptionData=ko.observable({id:"",heading1:"",heading2:"",description:"",options:[]}),this.databind.onShowExceptionPopup=function(t,e){t=ko.mapping.toJSON(d.exceptionData[t.value]);d.databind.selectedExceptionData(JSON.parse(t)),clearInterval(i.displayinterval),i.displayinterval=setInterval(function(){"block"==$("#exampleModal1").css("display")&&(window.appResetting||$("#exampleModal1").find(".scrollable").scrollTop(0),clearInterval(i.displayinterval))},2)},this.databind.onExceptionSaveClick=function(){for(var t=d.databind.selectedExceptionData().id,e=d.exceptionData[t].options(),i=d.databind.selectedExceptionData().options,a=0;a<e.length;a++)for(var n=0;n<i.length;n++)if(e[a].id()==i[n].id){e[a].value(i[n].value);break}d.exceptionData[t].description(d.databind.selectedExceptionData().description);t=ko.mapping.toJSON(d.exceptionData);AppModel.getInstance().setExceptionData(JSON.parse(t))},this.databind.sendMail=function(){var t=(new Date).toString("MM/dd/yyyy"),e=(new Date).toString("hh:mmtt"),i=t+" "+ViewModel.prototype._adviceView.timeConversion(e),a="Advice Summary [generated "+i+"]";ViewModel.prototype._adviceView.generateShortenURL(function(t){t&&(t=ViewModel.prototype._adviceView.getMailBody(i,t),mymail="mailto:?subject="+a+"&body="+t,window.location.href=mymail)})},this.databind.printForIos=function(){ViewModel.prototype._adviceView.generateShortenURL(function(t){t&&window.open(t,"_blank")},!0)},this.databind.printAdvicePage=function(){(window.cordova?cordova.plugins.printer:window).print()}},t.prototype.generateShortenURL=function(i,t){for(var e=this,a=e.databind.gdmtVM.beta_blocker.drugs.selectedOpt(),n=e.databind.gdmtVM.beta_blocker.drugs.firstLineAdvice["bb_opsl"==a?"bb_op0":a].advice(),a=e.databind.gdmtVM.diuretic.ques()[0].selectedOpt(),a=e.databind.gdmtVM.diuretic.firstLineAdvice["none"==a||0==a?"no":"yes"].advice(),d=JSON.parse(ko.mapping.toJSON(e.databind.contraindications)),o=d.ACE_ARB.ques,r={ques:[],description:"",show:!1},o=(o.filter(function(a,t,e){var n={que:"",options:[]};a.options.filter(function(t,e,i){t.isSelected&&"que1_op1"!=t.id&&(n.options.push(t.copytext),n.que=a.copytext)}),0!=n.options.length&&(r.ques.push(n),r.show=!0)}),r.description=d.ACE_ARB.description,r.description&&(r.show=!0),d.beta_blocker.ques),c={ques:[],description:"",show:!1},o=(o.filter(function(t,e,i){var a={que:"",options:[]};t.options.filter(function(t,e,i){t.isSelected&&"que_con_bb_op1"!=t.id&&a.options.push(t.copytext)}),0!=a.options.length&&(c.ques.push(a),c.show=!0)}),c.description=d.beta_blocker.description,c.description&&(c.show=!0),d.diuretic.ques),s={ques:[],description:"",show:!1},p=(o.filter(function(t,e,i){var a={que:"",options:[]};t.options.filter(function(t,e,i){t.isSelected&&"que_con_du_op1"!=t.id&&a.options.push(t.copytext)}),0!=a.options.length&&(s.ques.push(a),s.show=!0)}),s.description=d.diuretic.description,s.description&&(s.show=!0),AppModel.getInstance()),l=(acearbAdviceId=p.getIdByCopyText(this.databind.acearbAdvice()),[]),u=e.databind.additionalTherapy(),g=0;g<u.length;g++){var b=p.getIdByCopyText(u[g].summary);l.push({id:b})}for(u=e.databind.deviceTherapy(),g=0;g<u.length;g++){b=p.getIdByCopyText(u[g].summary);l.push({id:b})}var _,o=JSON.stringify(l),d=JSON.stringify(r),h=JSON.stringify(c),f=JSON.stringify(s),v="",e=(e.databind.advice_RAAS_none_additional()&&(v=p.getIdByCopyText(e.databind.advice_RAAS_none_additional().summary)),acearbAdviceId+"#"+n+"#"+a+"#"+o+"#"+d+"#"+h+"#"+f+"#"+v+"#"+(t?Date.now():0)),n=window.btoa(e);t?(_=window.acc.baseUrl+"?"+Date.now()+"#!/content/staticadviceviewpage?data="+n,i(_)):(_=window.acc.firebaseDynamicLink.link+"?data="+n,a=JSON.stringify({dynamicLinkInfo:{domainUriPrefix:window.acc.firebaseDynamicLink.domainUriPrefix,link:_}}),$.ajax({url:window.acc.firebaseDynamicLink.api,type:"POST",data:a,contentType:"application/json;",dataType:"json"}).done(function(t){i(t.shortLink||_)}).fail(function(t,e){i(_),console.error(t,e)}))},t.prototype.getMailBody=function(t,e){var i=this,a=AppModel.getInstance(),n="%0d%0a",d=(c=(c=(c=(c=a.getCopytext("cp_email_generate_text")+t)+n+n)+(a.getCopytext("cp_email_header_info")+e))+n+n,""),t=i.databind.patientVM.NYHA,e=w.findAndGetValue(t.options,t.selectedOpt()),t=(e.value()&&(d=(d+=n)+i.databind.getCopyText(e.copytext()+"_email_text")),i.databind.patientVM.LVEF),e=w.findAndGetValue(t.options,t.selectedOpt());e.value()&&(d=(d+=n)+i.databind.getCopyText(e.copytext()+"_email_text")),i.databind.patientVM.indication.options().filter(function(t,e,i){t.selectedOpt()&&(t=t.copytext(),d=(d+=n)+a.getCopytext(t+"_email_text"))});i.databind.patientVM.modifier.options().filter(function(t,e,i){t.selectedOpt()&&(t=t.copytext(),d=(d+=n)+a.getCopytext(t+"_email_text"))}),d&&(c=(c=(c+=a.getCopytext("cp_email_patient_profile_text"))+d)+n+n),c+=a.getCopytext("cp_email_patient_advice_text");var o=this.databind.gdmtVM.ACE_ARB.selectedOpt(),r=(this.databind.gdmtVM.ACE_ARB.options().filter(function(t,e,i){return t.id()==o}),acearbAdviceId=a.getIdByCopyText(this.databind.acearbAdvice()),c=(c=c+n+n)+a.getCopytext(acearbAdviceId+"_email_text"),i.databind.advice_RAAS_contraindication()),t=$.trim(r.description);if(0<r.ques.length||t){for(var c=(c+=n)+a.getCopytext("cp_email_contraindication_text"),s="",p=0;p<r.ques.length;p++)for(var l=r.ques[p].copyTexts,u=0;u<l.length;u++){var g=a.getCopytext(l[u]);-1==s.indexOf(g)&&(c=(c+=n)+"-"+a.getCopytext(l[u]+"_email_text")),s+=":"+g}(C=t)&&(c+=n,(S=17)<C.length?c=c+C.substring(0,S)+"...":c+=C)}e=i.databind.advice_RAAS_none_additional();if(e)switch(y=a.getIdByCopyText(e.summary)){case"cp_adv_at_arni10":case"cp_adv_at_arni24":case"cp_adv_at_arni10_black":case"cp_adv_at_arni24_black":c=(c=c+n+n)+a.getCopytext("cp_adv_at_arni_email_text");break;case"cp_adv_at_arni_not":case"cp_adv_at_arni_ace":c=(c=c+n+n)+a.getCopytext("cp_adv_at_arni_not_email_text");break;default:c=(c=c+n+n)+a.getCopytext(y+"_email_text")}var b=i.databind.advice_BB_contraindication(),t=$.trim(b.description);if(0<b.ques.length||t){c=(c=(c=(c=c+n+n)+a.getCopytext("cp_email_BB_text"))+n)+a.getCopytext("cp_email_contraindication_text");for(var s="",_="",h=0,p=0;p<b.ques.length;p++)for(var f=b.ques[p].options,u=0;u<f.length;u++)-1==s.indexOf(f[u])&&(_=(_+=n)+"-"+f[u],h++),s+=":"+f[u];3<h?c=(c+=n)+a.getCopytext("cp_email_multiple_text"):c+=_,(C=t)&&(c+=n,(S=17)<C.length?c=c+C.substring(0,S)+"...":c+=C)}else{var v=a.getIdByCopyText(this.databind.betaBlockerAdvice());c=(c=c+n+n)+a.getCopytext(v+"_email_text")}var A=i.databind.additionalTherapy();if(0<A.length)for(p=0;p<A.length;p++)switch(A[p].id){case"cp_adv_at_arni10":case"cp_adv_at_arni24":case"cp_adv_at_arni10_black":case"cp_adv_at_arni24_black":c=(c=c+n+n)+a.getCopytext("cp_adv_at_arni_email_text");break;case"cp_adv_at_arni_not":case"cp_adv_at_arni_ace":c=(c=c+n+n)+a.getCopytext("cp_adv_at_arni_not_email_text");break;default:var y=a.getIdByCopyText(A[p].summary);c=(c=c+n+n)+a.getCopytext(y+"_email_text")}var m=i.databind.advice_diuretic_contraindication();if(0<m.ques.length){c=(c=(c=(c+=n)+a.getCopytext("cp_email_diuretics_text"))+n)+a.getCopytext("cp_email_contraindication_text");for(var C,S,s="",p=0;p<m.ques.length;p++)for(f=m.ques[p].options,u=0;u<f.length;u++)-1==s.indexOf(f[u])&&(c=(c+=n)+"-"+f[u]),s+=":"+f[u];(C=m.description)&&(c+=n,(S=17)<C.length?c=c+C.substring(0,S)+"...":c+=C)}else{v=a.getIdByCopyText(this.databind.diureticAdvice());c=(c=c+n+n)+a.getCopytext(v+"_email_text")}var x=i.databind.deviceTherapy();if(0<x.length)for(p=0;p<x.length;p++){y=a.getIdByCopyText(x[p].summary);c=(c=c+n+n)+a.getCopytext(y+"_email_text")}return c=(c=c+n+n)+a.getCopytext("cp_email_footer_info")},t.prototype.timeConversion=function(t){var t=t.toLowerCase().split(":"),e=parseInt(t[0]),i=t[1];return-1!=i.indexOf("am")&&12==e&&(t[0]="00"),-1!=i.indexOf("pm")&&e<12&&(t[0]=e+12),t.join(":").replace(/(am|pm)/,"")},t.prototype.resetExceptionData=function(){var t=this,e="ACEI"==AppModel.getInstance().getGDMTData().ACE_ARB.selectedOpt||"ARB"==AppModel.getInstance().getGDMTData().ACE_ARB.selectedOpt,i=AppModel.getInstance().getGDMTData().ACE_ARB.options.filter(function(t,e,i){return"Neither"==t.id}),a=AppModel.getInstance().getGDMTData().beta_blocker,n=AppModel.getInstance().getGDMTData().diuretic,i=!("none"==i[0].que[0].selectedOpt||!i[0].que[0].selectedOpt),a="bb_op0"!=a.drugs.selectedOpt,n=!("none"==n.ques[0].selectedOpt||!n.ques[0].selectedOpt);if(i||e){for(var d=t.exceptionData.ACE_ARB.options(),o=0;o<d.length;o++)d[o].value(!1);t.exceptionData.ACE_ARB.description("")}if(a){for(d=t.exceptionData.beta_blocker.options(),o=0;o<d.length;o++)d[o].value(!1);t.exceptionData.beta_blocker.description("")}if(n){for(d=t.exceptionData.diuretic.options(),o=0;o<d.length;o++)d[o].value(!1);t.exceptionData.diuretic.description("")}},t.prototype.showAceArbAdvice=function(){var t,e,a=this.databind.gdmtVM.ACE_ARB.selectedOpt(),i=this.databind.gdmtVM.ACE_ARB.options(),n=(i=i.filter(function(t,e,i){return t.id()==a}))[0].selectedOpt(),d="Neither"==a;this.databind.showAceArbExceptionBtn(!1),this.databind.rasInsId(""),this.databind.showRASContraindicationHeader(!0),d?(d=i[0].que(),e=this.adviceList.filter(function(t){return"RASNone_sp"===t.advice||"RASNone_1"===t.advice||"RASNone_2"===t.advice||"RASNone_3"===t.advice||"RASNone_4"===t.advice||"RASNone_5"===t.advice||"RASNone_6"===t.advice})[0],t="Neither"===this.databind.gdmtVM.ACE_ARB.selectedViewOpt(),e&&t?(this.databind.showAceArbExceptionBtn(!0),this.databind.acearbAdvice(this.databind.getCopyText("cp_"+e.advice)),this.databind.rasInsId(""),"RASNone_4"===e.advice?this.databind.rasInsId("arb"):"RASNone_2"===e.advice?this.databind.rasInsId("arni"):"RASNone_3"!==e.advice&&"RASNone_5"!==e.advice||this.databind.rasInsId("acei"),"RASNone_4"!==e.advice&&"RASNone_5"!==e.advice&&"RASNone_6"!==e.advice||this.databind.showRASContraindicationHeader(!1)):(t="ARNI"===this.databind.gdmtVM.ACE_ARB.selectedViewOpt(),e=this.adviceList.some(function(t){return"RAS13"===t.advice}),t&&e?(this.databind.acearbAdvice(this.databind.getCopyText("cp_ras13")),this.databind.rasInsId("arni")):(e=this.adviceList.some(function(t){return"RAS18"===t.advice}),t&&e?(this.databind.acearbAdvice(this.databind.getCopyText("cp_RAS18")),this.databind.rasInsId("arni")):(t=1==(d=i[0].que())[0].selectedOpt()?"cp_neither_flt_on_arni":"cp_neither_flt_not_arni",d[0].selectedOpt()||this.databind.showAceArbExceptionBtn(!0),this.databind.acearbAdvice(this.databind.getCopyText(t)),this.databind.rasInsId("acearb"))))):0<this.adviceList.filter(function(t){if(-1<t.advice.indexOf("ARNI_10")||-1<t.advice.indexOf("ARNI_24"))return!0}).length?this.databind.acearbAdvice(this.databind.getCopyText("cp_ace_arb_on_arni")):(e=i[0].firstLineAdvice[n],1===(d=this.adviceList.filter(function(t){return"RAS1_ace"===t.id||"RAS1_arb"===t.id||"RAS1"===t.id||"RAS5"===t.id||"RAS6"===t.id||"RAS14"===t.id&&"op0"!=n})).length?this.adviceList.filter(function(t){return"RAS1_ace"===t.id||"RAS1_arb"===t.id})[0]&&"op0"!==n?this.databind.acearbAdvice(this.databind.getCopyText(e.advice()+"_ras1")):this.databind.acearbAdvice(this.databind.getCopyText("cp_"+d[0].advice)):this.databind.acearbAdvice(this.databind.getCopyText(e.advice())),this.databind.rasInsId("acearb"))},t.prototype.showBetaBlockerAdvice=function(){var t=this.databind.gdmtVM.beta_blocker.drugs.selectedOpt(),e=this.databind.gdmtVM.beta_blocker.drugs.firstLineAdvice[t="bb_opsl"==t?"bb_op0":t];this.databind.betaBlockerAdvice(this.databind.getCopyText(e.advice())),this.databind.showBBExceptionBtn("bb_op0"==t)},t.prototype.showDiureticAdvice=function(){var t=this.databind.gdmtVM.diuretic.ques()[0].selectedOpt(),e=this.databind.gdmtVM.diuretic.firstLineAdvice[t="none"==t||0==t?"no":"yes"];this.databind.diureticAdvice(this.databind.getCopyText(e.advice())),this.databind.showDiureticExceptionBtn("no"==t)},t.prototype.showAdditionalTherapyAdvice=function(){for(var t=this,e=t.adviceList,i=(t.databind.additionalTherapy([]),t.databind.deviceTherapy([]),[]),a=0;a<e.length;a++){var n=e[a].advice,d=e[a].adviceData,o=d.copyText;"ICD"==n||"CRT"==n?t.databind.deviceTherapy.push({summary:this.databind.getCopyText(o),showInstructionLink:!0,id:o,adviceData:d}):(n=d.viewInst||o)&&i.push({summary:this.databind.getCopyText(o),showInstructionLink:!0,id:n,adviceData:d})}(i=i.filter(function(t,e,i){for(var a=0,a=0;a<i.length&&t.id!==i[a].id;a++);return a===e})).sort(function(t,e){return t.adviceData.sortOrder-e.adviceData.sortOrder}),i.length&&0===i[0].adviceData.sortOrder?t.databind.advice_RAAS_none_additional(i[0]):t.databind.advice_RAAS_none_additional(null),i=i.filter(function(t,e){return 0!=t.adviceData.sortOrder}),t.databind.additionalTherapy(i)},t.prototype.getValidAdviceList=function(A){var y=this;AppModel.getInstance().getHFLogicModel().getModIndList(y.databind,function(t){for(var e=t.advicelist,i=[],a=0;a<e.length;a++){var n=!1,d="clean",o=(e[a].advice.id,e[a].advice.indi_modi_com);if(o)for(var r=0;r<o.length;r++){var c=o[r].split("_"),s=c[0],p=c[1].replace(/ /g,""),l="true"==c[2],u=c[3].replace(/ /g,""),c="true"==c[4],p=!p||function(a){return 0!=y.databind.patientVM.indication.options().filter(function(t,e,i){return!(t.id()!=a||!t.selectedOpt())}).length}(p),u=!u||function(a){return 0!=y.databind.patientVM.modifier.options().filter(function(t,e,i){return!(t.id()!=a||!t.selectedOpt())}).length}(u);if("OR"==s&&p==l&&u==c){n=!0;break}if("AND"==s){if(p!=l||u!=c){n=!1;break}n=!0}if("ANDOR"==s&&(d="dirty",1==n)&&p==l&&u==c){d="pass";break}}else"Neither"===y.databind.gdmtVM.ACE_ARB.selectedViewOpt()&&(n=function(t){var i,e,a;return"RASNone_sp"===t.id||(a=t.advice.RAS_CI,i=y.databind.contraindications.ACE_ARB.ques,!(!(e=i().filter(function(t,e){t=w.findAndGetValue(i,t.id());return 0!=e&&w.getSelectedOptions(t.options).length})).filter(function(t){return"que2"===t.id()}).length||"RAS9None"!==t.id))||(a?(t=a.split("_"),a=t.filter(function(t){return w.findAndGetValue(function(){return e},t)}),t.length===a.length&&e.length===a.length):!e.length)}(e[a]));(n="dirty"==d?"pass"==d:n)&&i.push({id:e[a].id,advice:e[a].advice.id,adviceData:e[a].advice})}"ARNI"!==y.databind.gdmtVM.ACE_ARB.selectedViewOpt()&&(i=i.filter(function(t){return"RAS13"!==t.id}));var i="op0"===w.findAndGetValue(y.databind.gdmtVM.ACE_ARB.options,"ACEI").selectedOpt()?i.filter(function(t){return"RAS14"!==t.id}):i.filter(function(t){return"RAS6"!==t.id}),t=(y.databind.patientVM.indication.CIforIvabridine.noSelected()||(i=i.filter(function(t){return"Ivabridine"!==t.id&&"IvabridineRegular"!==t.id})),y.databind.contraindications.ACE_ARB.ques),g=w.findAndGetValue(t,"que2"),b=w.findAndGetValue(t,"que3"),_=w.findAndGetValue(t,"que4"),h=w.findAndGetValue(t,"que5"),f=g.options().concat(b.options()).concat(_.options()).concat(h.options()),v=w.getSelectedOptions(function(){return f});v.length||(v=w.findAndGetValue(t,"que1").options()),i=i.filter(function(t){var e=!0,i=t.adviceData.rasCI;if(i){if(i.orSelect&&i.orSelect.length&&(e=v.some(function(e){return i.orSelect.some(function(t){return e.id()===t})})),i.orNotSelect&&i.orNotSelect.length&&(e=e&&!v.some(function(e){return i.orNotSelect.some(function(t){return e.id()===t})})),i.andNotSelect&&i.andNotSelect.length&&e)for(var a=0;a<i.andNotSelect.length;a++){var n=i.andNotSelect[a];if(v.some(function(t){return n===t.id()})){e=!1;break}}if(i.andSelect&&i.andSelect.length&&e)for(a=0;a<i.andSelect.length;a++){n=i.andSelect[a];if(!v.some(function(t){return n===t.id()})){e=!1;break}}}return e}),console.log(v),A(i)})},t.prototype.displayAdvicePage=function(){var e=this;if(!e.databind.gdmtVM.ACE_ARB.selectedOpt())return pager.navigate("#!/content/evaluate"),!0;pager.navigate("#!/content/advice/baselinetherapy"),$(window).scrollTop(0),clearTimeout(window.cleartimeoutAdvicePage),window.cleartimeoutAdvicePage=setTimeout(function(){e.getValidAdviceList(function(t){e.adviceList=t,e.getAdviceSummary()})},100)},t.prototype.getAdviceSummary=function(){var t=ko.mapping.toJSON(this.databind.contraindications);AppModel.getInstance().setContraindicationsData(JSON.parse(t));this.showAceArbAdvice(),this.showBetaBlockerAdvice(),this.showDiureticAdvice(),this.showAdditionalTherapyAdvice(),this.showContraindications()},t.prototype.showContraindications=function(){for(var t=this,e=JSON.parse(ko.mapping.toJSON(this.databind.contraindications)),i=(AppModel.getInstance().setContraindicationsData(e),{ques:[],description:"",show:!1}),a=0;a<e.ACE_ARB.ques.length;a++)if("que1"!==e.ACE_ARB.ques[a].id){(o={que:"",options:[],copyTexts:[]}).que=t.databind.getCopyText(e.ACE_ARB.ques[a].copytext);for(var n=e.ACE_ARB.ques[a].options,d=0;d<n.length;d++)n[d].isSelected&&(o.options.push(t.databind.getCopyText(n[d].copytext)),o.copyTexts.push(n[d].copytext));0!=o.options.length&&(i.ques.push(o),i.show=!0)}i.description=e.ACE_ARB.description,i.description&&(i.show=!0),t.databind.advice_RAAS_contraindication(i);for(i={ques:[],description:"",show:!1},a=0;a<e.beta_blocker.ques.length;a++){for(var o={que:"",options:[]},n=e.beta_blocker.ques[a].options,d=0;d<n.length;d++)"que_con_bb_op1"!=n[d].id&&n[d].isSelected&&o.options.push(t.databind.getCopyText(n[d].copytext));0!=o.options.length&&(i.ques.push(o),i.show=!0)}i.description=e.beta_blocker.description,i.description&&(i.show=!0),t.databind.advice_BB_contraindication(i);for(i={ques:[],description:"",show:!1},a=0;a<e.diuretic.ques.length;a++){for(o={que:"",options:[]},n=e.diuretic.ques[a].options,d=0;d<n.length;d++)"que_con_du_op1"!=n[d].id&&n[d].isSelected&&o.options.push(t.databind.getCopyText(n[d].copytext));0!=o.options.length&&(i.ques.push(o),i.show=!0)}i.description=e.diuretic.description,i.description&&(i.show=!0),t.databind.advice_diuretic_contraindication(i)},i.AdviceView=t}(window,window.UtilityFunctions),function(e,l,c,s,p){function u(){}u.isNoneGDMTSelected=!0,u.prototype.databind={},u.prototype._adviceView=new e.AdviceView,u.prototype._drugsView=new e.DrugsView,u.prototype.disclaimerInit=function(){var t=localStorage.getItem("DISCLAIMER_STATUS");t||this.databind.showDisclaimer(!0),"show"==t&&this.databind.showDisclaimer(!0),"hide"==t&&this.databind.showDisclaimer(!1)},u.prototype.init=function(){var i=this,e=0,a=(p("[data-reveal]").on("open.zf.reveal",function(){e=p(window).scrollTop()}),p("[data-reveal]").on("closed.zf.reveal",function(){var t=setInterval(function(){p(window).scrollTop(e)},0);setTimeout(function(){clearInterval(t)},800)}),p(".contraindicated-modal").on("closed.zf.reveal",function(t){var e=JSON.parse(s.mapping.toJSON(i.databind.contraindications));e.ACE_ARB=i._contraindicationsData.ACE_ARB,e.beta_blocker=i._contraindicationsData.beta_blocker,e.diuretic=i._contraindicationsData.diuretic,s.mapping.fromJS(e,i.databind.contraindications)}),p(".contraindications_textarea").focus(function(t){p(".contraindicated-modal").each(function(t,e){setTimeout(function(){p(e).animate({scrollTop:p(document).height()},500)},300)})}),p(".contraindications_textarea").on("input propertychange",function(t){"id_contraindications_RAAS_textarea"==t.currentTarget.getAttribute("id")&&i.databind.contraindications.ACE_ARB.description(this.value),"id_contraindication_beta_blocker_textarea"==t.currentTarget.getAttribute("id")&&i.databind.contraindications.beta_blocker.description(this.value),"id_contraindication_diuretic_textarea"==t.currentTarget.getAttribute("id")&&i.databind.contraindications.diuretic.description(this.value);var e=p(t.currentTarget).val();150<e.length&&p(t.currentTarget).val(e.substr(0,150))}),p(document).on("touchend",".contraindicationSaveButton",function(t){document.activeElement.blur(),i.databind.onContraindicationSaveClick({type:p(this).attr("ctype")}),setTimeout(function(){p(".reveal").foundation("close")},100)}),this.databind.onContraindicationSaveClick=function(t){var e=JSON.parse(s.mapping.toJSON(i.databind.contraindications));"CONTRAINDICATION_RAAS"==t.type&&(i._contraindicationsData.ACE_ARB=e.ACE_ARB),"CONTRAINDICATION_BB"==t.type&&(i._contraindicationsData.beta_blocker=e.beta_blocker),"CONTRAINDICATION_Diuretic"==t.type&&(i._contraindicationsData.diuretic=e.diuretic),i.populateIndicationAndModifier()},this.databind.getTooltipText=function(t,e){return i.databind.getCopyText(t)},this.databind.getCopyText=function(t){return c.getInstance().getCopytext(t)},this.databind.onClick=function(t,e){e&&"load"!=e.type&&("OPEN_CONTRAINDICATION_MODAL"==t.type?((e=JSON.parse(s.mapping.toJSON(i.databind.contraindications))).beta_blocker=i._contraindicationsData.beta_blocker,e.ACE_ARB=i._contraindicationsData.ACE_ARB,e.diuretic=i._contraindicationsData.diuretic,e.ACE_ARB.hide=i.databind.contraindications.ACE_ARB.hide(),e.beta_blocker.hide=i.databind.contraindications.beta_blocker.hide(),e.diuretic.hide=i.databind.contraindications.diuretic.hide(),s.mapping.fromJS(e,i.databind.contraindications),p("#"+t.id).foundation("open")):"OPTION_CLICK_CONTRAINDICATION_MODAL"==t.type?i.onContraindicationOptionClick(t):"DISCLAIMER_CLICK"==t.type?(localStorage.setItem("DISCLAIMER_STATUS","hide"),i.databind.showDisclaimer(!1)):"EVALUATE_CONTINUE_CLICK"==t.type?(i.databind.getAdviceButtonState("active"),i.databind.showContinueBtn(!1),0==i.databind.indicationlist().length&&0==i.databind.indicationlist().length?i.databind.showFLTherapyBtn(!0):i.databind.showPatientScenario(!0),window.appResetting||p("html,body").stop().animate({scrollTop:p("#idFurtherIndications").offset().top},1e3)):"ACE_ARB_BG"==t.type?i.onButtonGroupClick(t):"ACE_ARB_NEITHER_QUESTIONS"==t.type?(i.onACEARBQuestionClick(t),i._adviceView.resetExceptionData()):"SELECT_BB_QUESTIONS"==t.type?i.onBBQuestionClick(t):"SELECT_DIURETIC_QUESTIONS"==t.type?(i.onDIURETICQuestionClick(t),i._adviceView.resetExceptionData()):"SELECT_MODIFIER_QUESTIONS"==t.type?i.onModifierQuestionClick(t):"SELECT_INDICATION_QUESTIONS"==t.type?i.onIndicationQuestionClick(t):"RESET_BUTTON"==t.type?(window.appResetting=!0,i.databind.getAdviceButtonState("disable_clickable"),c.getInstance().resetApp(),s.mapping.fromJS(c.getInstance().getGDMTData(),i.databind.gdmtVM),s.mapping.fromJS(c.getInstance().getPatientData(),i.databind.patientVM),s.mapping.fromJS(c.getInstance().getExceptionData(),i._adviceView.exceptionData),s.mapping.fromJS(c.getInstance().getContraindicationsData(),i.databind.contraindications),i._contraindicationsData=JSON.parse(JSON.stringify(i._contraindicationsTemp)),i.databind.acearbAdvice(""),i.databind.betaBlockerAdvice(""),i.databind.diureticAdvice(""),i.databind.showAceArbExceptionBtn(!1),i.databind.showBBExceptionBtn(!1),i.databind.showDiureticExceptionBtn(!1),i.databind.additionalTherapy([]),i.databind.deviceTherapy([]),window.lastRAASButtonClicked="",i.databind.advice_RAAS_none_additional(null),window.appResetting=!1,p("html,body").scrollTop(0)):"EVALUATE_WARNING_HANDLER"==t.type?i.onDisableAdviceClick(t):"GET_ADVICE_SUMMARY"==t.type?i._adviceView.displayAdvicePage():"SCROLL_DOWN"==t.type?window.appResetting||p("html,body").stop().animate({scrollTop:p("#"+t.scrollTo).offset().top},1e3):"AD_MD_CLICK"===t.type&&i.onAdditionalMedicationsClick(t))},this.databind.onSomeEvent=function(t){return i.onSomeEvent(t)},this.databind.staticPageEnabled=s.observable(!1),this.databind.isIosPrint=s.observable(!1),this.databind.acearbText=s.observable(),this.databind.betaBlockerText=s.observable(),this.databind.diureticText=s.observable(),this.databind.additionalTherapyText=s.observableArray(),this.databind.deviceTherapyText=s.observableArray(),this.databind.acearbException=s.observable(),this.databind.betablockerException=s.observable(),this.databind.diureticException=s.observable(),this.databind.showContinueBtn=s.observable(!0),this.databind.enableContinueBtn=s.observable(!1),this.databind.showFLTherapyBtn=s.observable(!1),this.databind.showPatientScenario=s.observable(!1),this.databind.getAdviceButtonState=s.observable("disable_clickable"),this.databind.indicationlist=s.observable([]),this.databind.modifierlist=s.observable([]),this.databind.isRequiredQuestion=s.observable(!0),this.databind.showDisclaimer=s.observable(!1),{});a.initACE=!0,this.databind.acearbSelect=s.observable(),this.databind.acearbSelect.subscribe(function(t){a.initACE?a.initACE=!1:i.onACEOptionSelect(t)},this),a.initBB=!0,this.databind.bbSelect=s.observable(),this.databind.bbSelect.subscribe(function(t){a.initBB?a.initBB=!1:(i.onBBOptionSelect(t),"bb_op0"!=t?window.appResetting||p("html,body").stop().animate({scrollTop:p("#divBBQuestions").offset().top},1e3):window.appResetting||p("html,body").stop().animate({scrollTop:p("#additionalMedsScroll").offset().top},1e3))},this),a.initNYHA=!0,this.databind.NYHASelect=s.observable(),this.databind.NYHASelect.subscribe(function(t){a.initNYHA?a.initNYHA=!1:i.onNYHAOptionSelect(t)},this),a.initLVEF=!0,this.databind.LVEFSelect=s.observable(),this.databind.LVEFSelect.subscribe(function(t){a.initLVEF?a.initLVEF=!1:i.onLVEFOptionSelect(t)},this),this.databind.criticalNotification={Title:s.observable(""),Text:s.observable(""),DisplayAppStoreUrl:s.observable(""),appStoreUri:s.observable(""),hide:s.observable(!0)},this.databind.nonCriticalNotification=s.observable([]),this.notificationInit(),i.disclaimerInit()},u.prototype.notificationInit=function(){var e=this;window.notification.callNotification(function(){e.databind.nonCriticalNotification(window.notification.getNonCriticalByOsType());var t=window.notification.getCriticalByOsType();0<t.length?(e.databind.criticalNotification.Title(t[0].Title),e.databind.criticalNotification.Text(t[0].Text),e.databind.criticalNotification.DisplayAppStoreUrl(t[0].DisplayAppStoreUrl),e.databind.criticalNotification.appStoreUri(window.notification.appStoreUri),e.databind.criticalNotification.hide(!1),p(".critical-screen .page").height(p(window).height()),p(window).scrollTop(0),p("body").css("overflow","hidden"),window.setScreenSpacerHeight()):e.databind.criticalNotification.hide(!0)})},u.prototype.onContraindicationOptionClick=function(t){var e=this;if("RAAS"==t.id)if("que1_op1"==t.op_id)for(var i=0;i<e.databind.contraindications.ACE_ARB.ques().length;i++)for(var a=e.databind.contraindications.ACE_ARB.ques()[i].options(),n=0;n<a.length;n++)"que1_op1"!=a[n].id()&&a[n].isSelected(!1);else{e.databind.contraindications.ACE_ARB.ques().filter(function(t,e,i){return"que1"==t.id()})[0].options().filter(function(t,e,i){return"que1_op1"==t.id()})[0].isSelected(!1);var d=e.databind.contraindications.ACE_ARB.ques,o=l.findAndGetValue(d,t.que_id),r=l.findAndGetValue(o.options,t.op_id);r.dependent&&(o=l.findAndGetValue(d,r.dependent.queId()),(d=l.findAndGetValue(o.options,r.dependent.optionId())).dependent.autoSelect())&&d.isSelected(r.isSelected())}if("BB"==t.id)if("que_con_bb_op1"==t.op_id)for(i=0;i<e.databind.contraindications.beta_blocker.ques().length;i++)for(a=e.databind.contraindications.beta_blocker.ques()[i].options(),n=0;n<a.length;n++)"que_con_bb_op1"!=a[n].id()&&a[n].isSelected(!1);else e.databind.contraindications.beta_blocker.ques().filter(function(t,e,i){return"que_con_bb"==t.id()})[0].options().filter(function(t,e,i){return"que_con_bb_op1"==t.id()})[0].isSelected(!1);if("Diuretic"==t.id)if("que_con_du_op1"==t.op_id)for(i=0;i<e.databind.contraindications.diuretic.ques().length;i++)for(a=e.databind.contraindications.diuretic.ques()[i].options(),n=0;n<a.length;n++)"que_con_du_op1"!=a[n].id()&&a[n].isSelected(!1);else e.databind.contraindications.diuretic.ques().filter(function(t,e,i){return"que_con_diuretic"==t.id()})[0].options().filter(function(t,e,i){return"que_con_du_op1"==t.id()})[0].isSelected(!1)},u.prototype.loadStaticAdvice=function(t){var t=t.replace("data=",""),t=window.atob(t).split("#"),e=t[0],i="cp_RASNone_4"!==e&&"cp_RASNone_6"!==e&&"cp_RASNone_5"!==e,a=t[1],n=t[2],d=t[7];if(d&&this.databind.advice_RAAS_none_additional({summary:this.databind.getCopyText(d)}),this.databind.staticPageEnabled(!0),this.databind.acearbText(this.databind.getCopyText(e)),this.databind.showRASContraindicationHeader(i),this.databind.betaBlockerText(this.databind.getCopyText(a)),this.databind.diureticText(this.databind.getCopyText(n)),t[3])for(var o=JSON.parse(t[3]),r=0;r<o.length;r++)("cp_adv_at_icd"==o[r].id||"cp_adv_at_crt"==o[r].id?this.databind.deviceTherapyText:this.databind.additionalTherapyText).push({summary:this.databind.getCopyText(o[r].id)});var c,d=JSON.parse(t[4]),e=(this.databind.acearbException(d),JSON.parse(t[5])),i=(this.databind.betablockerException(e),JSON.parse(t[6])),a=(this.databind.diureticException(i),this.databind.onStaticPagePrint=function(t){t&&"load"!=t.type&&window.print()},parseInt(t[8]));this.databind.isIosPrint(!!a),a&&(!(n=parseInt(localStorage.getItem("printId")))||n<a)&&(localStorage.setItem("printId",a),c=setInterval(function(){"none"===document.getElementById("spinner").style.display&&(setTimeout(function(){try{window.print()}catch(t){console.log(t)}},500),clearInterval(c))},500))},u.prototype.initGDMT=function(t){this._gdmtData=t},u.prototype.initPatient=function(t){this._patientData=t},u.prototype.initKo=function(){var t;this._gdmtData?(t=s.mapping.fromJS(this._gdmtData),this.databind.gdmtVM=t,t=s.mapping.fromJS(this._patientData),this.databind.patientVM=t,this._contraindicationsTemp=JSON.parse(JSON.stringify(c.getInstance().getContraindicationsData())),this._contraindicationsData=JSON.parse(JSON.stringify(this._contraindicationsTemp)),this.databind.contraindications=s.mapping.fromJS(c.getInstance().getContraindicationsData()),this._adviceView.init(this.databind),this._drugsView.init(this.databind)):e.logError("ViewModel : _gdmtData should not be null")},u.prototype.onPagerAfterShow=function(t){p(".reveal").foundation("close");var e=t.page.currentId,e=("advice"!=e&&"evaluate"!=e&&"news"!=e||this.notificationInit(),window.location.hash);"active"!=this.databind.getAdviceButtonState()&&("#!/content/evaluate"==e?this.databind.getAdviceButtonState("disable_clickable"):this.databind.getAdviceButtonState("disable")),this._drugsView&&this._drugsView.onPagerAfterShow(t)},u.prototype.onDisableAdviceClick=function(t){this.showWarningUI(),window.appResetting||p("html,body").stop().animate({scrollTop:p("#divPatientScenario").offset().top},1e3)},u.prototype.initChangeEvent=function(t){window.addEventListener("hashchange",function(t){"#!/content/advice/baselinetherapy"==window.location.hash&&u.prototype._adviceView.displayAdvicePage()})},u.prototype.checkEvaluateScreenValid=function(){var t=[],e=this,i=!1,a=!1,n=e.databind.gdmtVM.ACE_ARB.selectedOpt();if(""==n)t.push(e.databind.gdmtVM.ACE_ARB.warning),a=!1;else{var d=n,o=e.databind.gdmtVM.ACE_ARB.options().filter(function(t,e,i){return t.id()==d})[0].que();if("Neither"==d)for(var i=!0,r=0;r<o.length;r++)"none"==o[r].selectedOpt()&&(i=!1),0==o[r].selectedOpt()&&1==i&&(i=!1);else{i=!0;for(r=0;r<o.length;r++)"none"==o[r].selectedOpt()&&(t.push(o[r].warning),i=!1)}a=i}var n=!1,c=e.databind.gdmtVM.beta_blocker.drugs.selectedOpt();if("bb_opsl"==c)t.push(e.databind.gdmtVM.beta_blocker.drugs.warning),n=!1;else if("bb_op0"==c)n=!1;else{o=e.databind.gdmtVM.beta_blocker.ques();i=!0;for(r=0;r<o.length;r++)"none"==o[r].selectedOpt()&&(t.push(o[r].warning),i=!1);n=i}var c=!1,s=e.databind.gdmtVM.diuretic.ques()[0].selectedOpt(),c="none"==s?(t.push(e.databind.gdmtVM.diuretic.ques()[0].warning),!1):!!s,s=e.databind.patientVM.NYHA.selectedOpt(),p=e.databind.patientVM.LVEF.selectedOpt();"NYHASL"!=s&&"LSL"!=p||("NYHASL"==s&&t.push(e.databind.patientVM.NYHA.warning),"LSL"==p&&t.push(e.databind.patientVM.LVEF.warning)),u.isNoneGDMTSelected=!1,a||n||c||(u.isNoneGDMTSelected=!0);return l.getSelectedOptions(e.databind.patientVM.additionalMedications.options).length||t.push(e.databind.patientVM.additionalMedications.warning),0!=t.length?this.showDisableContinueButton():(this.databind.getAdviceButtonState("disable_clickable"),"NYHAI"===s||"NYHAUN"===s?(this.databind.getAdviceButtonState("active"),this.databind.showFLTherapyBtn(!0),this.databind.showContinueBtn(!1)):(this.databind.showFLTherapyBtn()&&this.databind.showContinueBtn(!0),this.databind.showFLTherapyBtn(!1)),this.databind.enableContinueBtn(!0)),t},u.prototype.showWarningUI=function(){for(var t=this.checkEvaluateScreenValid(),e=0;e<t.length;e++)t[e](!0)},u.prototype.onACEOptionSelect=function(t){var a=this.databind.gdmtVM.ACE_ARB.selectedOpt(),e=this.databind.gdmtVM.ACE_ARB.options(),e=(0<(e=e.filter(function(t,e,i){return t.id()==a})).length&&e[0].selectedOpt(t),s.mapping.toJSON(this.databind.gdmtVM));c.getInstance().setGDMTData(JSON.parse(e))},u.prototype.onBBOptionSelect=function(t){this.databind.contraindications.beta_blocker.hide(!0);var e=this,i=e.databind.gdmtVM.beta_blocker.drugs;if("bb_op0"==i.selectedOpt()||"bb_opsl"==i.selectedOpt())for(var a=this.databind.gdmtVM.beta_blocker.ques(),n=0;n<a.length;n++)a[n].selectedOpt("none"),a[n].warning(!1);i.selectedOpt(t);t=JSON.parse(s.mapping.toJSON(this.databind.contraindications)),this._contraindicationsData.beta_blocker=JSON.parse(JSON.stringify(this._contraindicationsTemp)).beta_blocker,t.beta_blocker=JSON.parse(JSON.stringify(this._contraindicationsTemp)).beta_blocker,s.mapping.fromJS(t,this.databind.contraindications),"bb_op0"==i.selectedOpt()&&(this.databind.contraindications.beta_blocker.hide(!1),p("#id_contraindication_beta_blocker").removeClass("fadeIn animated").addClass("fadeIn animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p(this).removeClass("fadeIn animated")})),"bb_op1"==i.selectedOpt()&&e.databind.gdmtVM.beta_blocker.ques()[0].copytext("cp_bb_que_bisoprolol"),"bb_op2"==i.selectedOpt()&&e.databind.gdmtVM.beta_blocker.ques()[0].copytext("cp_bb_que_carvedilol"),"bb_op3"==i.selectedOpt()&&e.databind.gdmtVM.beta_blocker.ques()[0].copytext("cp_bb_que_carevedilolCR"),"bb_op4"==i.selectedOpt()&&e.databind.gdmtVM.beta_blocker.ques()[0].copytext("cp_bb_que_metoprolol"),"bb_opsl"!=i.selectedOpt()&&e.databind.gdmtVM.beta_blocker.drugs.warning(!1),t=s.mapping.toJSON(this.databind.gdmtVM);c.getInstance().setGDMTData(JSON.parse(t)),0==e.checkEvaluateScreenValid().length&&e.populateIndicationAndModifier(),e._adviceView.resetExceptionData()},u.prototype.onNYHAOptionSelect=function(t){var e=this,t=(e.databind.patientVM.NYHA.selectedOpt(t),s.mapping.toJSON(this.databind.patientVM)),t=(c.getInstance().setPatientData(JSON.parse(t)),e.databind.patientVM.NYHA.selectedOpt()),i=e.databind.patientVM.LVEF.selectedOpt();"NYHASL"!=t&&"LSL"!=i?(e.checkEvaluateScreenValid(),e.populateIndicationAndModifier(),window.appResetting||p("html,body").stop().animate({scrollTop:p("#idBackgroundMedications").offset().top},1e3)):(this.databind.indicationlist([]),this.databind.modifierlist([]),this.showDisableContinueButton()),"NYHASL"!=t&&e.databind.patientVM.NYHA.warning(!1)},u.prototype.onLVEFOptionSelect=function(t){var e=this,t=(e.databind.patientVM.LVEF.selectedOpt(t),s.mapping.toJSON(this.databind.patientVM)),t=(c.getInstance().setPatientData(JSON.parse(t)),e.databind.patientVM.NYHA.selectedOpt()),i=e.databind.patientVM.LVEF.selectedOpt();"NYHASL"!=t&&"LSL"!=i?(e.checkEvaluateScreenValid(),e.populateIndicationAndModifier(),window.appResetting||p("html,body").stop().animate({scrollTop:p("#idBackgroundMedications").offset().top},1e3)):(this.databind.indicationlist([]),this.databind.modifierlist([]),this.showDisableContinueButton()),"LSL"!=i&&e.databind.patientVM.LVEF.warning(!1)},u.prototype.showDisableContinueButton=function(t){this.databind.showContinueBtn(!0),this.databind.enableContinueBtn(!1),this.databind.showFLTherapyBtn(!1),this.databind.showPatientScenario(!1),this.databind.getAdviceButtonState("disable_clickable")},u.prototype.showFirstlineButton=function(t){this.databind.showContinueBtn(!1),this.databind.enableContinueBtn(!1),this.databind.showFLTherapyBtn(!0),this.databind.showPatientScenario(!1),this.databind.getAdviceButtonState("active")},u.prototype.onButtonGroupClick=function(t){if(!window.lastRAASButtonClicked||window.lastRAASButtonClicked!=t.value){window.lastRAASButtonClicked=t.value;for(var e=JSON.parse(s.mapping.toJSON(this.databind.contraindications)),i=(this._contraindicationsData.ACE_ARB=JSON.parse(JSON.stringify(this._contraindicationsTemp)).ACE_ARB,e.ACE_ARB=JSON.parse(JSON.stringify(this._contraindicationsTemp)).ACE_ARB,s.mapping.fromJS(e,this.databind.contraindications),this.databind.contraindications.ACE_ARB.hide(!0),this.databind.gdmtVM.ACE_ARB.warning(!1),this.databind.gdmtVM.ACE_ARB.options()),a=0;a<i.length;a++){for(var n=i[a].que,d=0;d<n().length;d++)n()[d].selectedOpt("none"),n()[d].warning(!1);i[a].selectedOpt("op0")}this.databind.gdmtVM.ACE_ARB.selectedOpt(t.alias),this.databind.gdmtVM.ACE_ARB.selectedViewOpt(t.value);e=s.mapping.toJSON(this.databind.gdmtVM);c.getInstance().setGDMTData(JSON.parse(e)),p("#divCards").removeClass("fadeIn animated").addClass("fadeIn animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p(this).removeClass("fadeIn animated")}),p(".tooltip").each(function(){p("#id_RAAS_tooltip").attr("aria-describedby")!=p(this).attr("id")&&p(this).remove()}),setTimeout(function(){0<p(".mytooltip").length&&(p(".mytooltip").foundation(),p(".mytooltip").foundation("hide"))},200),"Neither"==t.alias?(window.appResetting||p("html,body").stop().animate({scrollTop:p("#divCards").offset().top},1e3),"Neither"==t.value&&(this.databind.contraindications.ACE_ARB.hide(!1),p("#id_contraindication_RAAS").removeClass("fadeIn animated").addClass("fadeIn animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p(this).removeClass("fadeIn animated")}),this.onACEARBQuestionClick({checked:!1,type:"ACE_ARB_NEITHER_QUESTIONS",value:"que1"})),"ARNI"==t.value&&this.onACEARBQuestionClick({checked:!0,type:"ACE_ARB_NEITHER_QUESTIONS",value:"que1"}),this._adviceView.resetExceptionData()):0==this.checkEvaluateScreenValid().length&&this.populateIndicationAndModifier()}},u.prototype.onACEARBQuestionClick=function(a){var t=this,n=t.databind.gdmtVM.ACE_ARB.selectedOpt(),e=t.databind.gdmtVM.ACE_ARB.options();(e=(e=e.filter(function(t,e,i){return t.id()==n}))[0].que().filter(function(t,e,i){return t.id()==a.value}))[0].selectedOpt()!=a.checked&&(e[0].selectedOpt(a.checked),e[0].warning(!1),e=s.mapping.toJSON(t.databind.gdmtVM),c.getInstance().setGDMTData(JSON.parse(e)),0==t.checkEvaluateScreenValid().length)&&t.populateIndicationAndModifier()},u.prototype.onBBQuestionClick=function(a){var t=(t=this.databind.gdmtVM.beta_blocker.ques()).filter(function(t,e,i){return t.warning(!1),t.id()==a.value});t[0].selectedOpt()==a.checked||(t[0].selectedOpt(a.checked),t=s.mapping.toJSON(this.databind.gdmtVM),c.getInstance().setGDMTData(JSON.parse(t)),0==this.checkEvaluateScreenValid().length&&this.populateIndicationAndModifier(),window.appResetting)||p("html,body").stop().animate({scrollTop:p("#additionalMedsScroll").offset().top},1e3)},u.prototype.onDIURETICQuestionClick=function(a){var t,e=(e=this.databind.gdmtVM.diuretic.ques()).filter(function(t,e,i){return t.id()==a.value});e[0].selectedOpt()!=a.checked&&(t=JSON.parse(s.mapping.toJSON(this.databind.contraindications)),this._contraindicationsData.diuretic=JSON.parse(JSON.stringify(this._contraindicationsTemp)).diuretic,t.diuretic=JSON.parse(JSON.stringify(this._contraindicationsTemp)).diuretic,s.mapping.fromJS(t,this.databind.contraindications),e[0].selectedOpt(a.checked),this.databind.contraindications.diuretic.hide(!0),0==e[0].selectedOpt()&&(this.databind.contraindications.diuretic.hide(!1),p("#id_contraindication_diuretic").removeClass("fadeIn animated").addClass("fadeIn animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p(this).removeClass("fadeIn animated")})),e[0].warning(!1),t=s.mapping.toJSON(this.databind.gdmtVM),c.getInstance().setGDMTData(JSON.parse(t)),0==this.checkEvaluateScreenValid().length)&&this.populateIndicationAndModifier()},u.prototype.onAdditionalMedicationsClick=function(t){var e=this,i=(e.databind.patientVM.additionalMedications.warning(!1),e.databind.patientVM.additionalMedications.options),a=l.findAndGetValue(i,t.value),i=("am5"==a.id()?(i().filter(function(t){t.isSelected(!1)}),window.appResetting||p("html,body").stop().animate({scrollTop:p("#diureticScroll").offset().top},1e3)):l.findAndGetValue(i,"am5").isSelected(!1),a.isSelected(t.checked),s.mapping.toJSON(e.databind.patientVM));c.getInstance().setPatientData(JSON.parse(i)),0==e.checkEvaluateScreenValid().length&&e.populateIndicationAndModifier()},u.prototype.onModifierQuestionClick=function(a){var t=this.databind.patientVM.modifier.options(),t=((t=t.filter(function(t,e,i){return t.id()==a.value}))[0].selectedOpt(a.checked),this.dependentOptions(t[0].id(),a.checked),s.mapping.toJSON(this.databind.patientVM));c.getInstance().setPatientData(JSON.parse(t))},u.prototype.onIndicationQuestionClick=function(a){var t=this.databind.patientVM.indication.options(),t=((t=t.filter(function(t,e,i){return t.id()==a.value}))[0].selectedOpt(a.checked),this.dependentOptions(t[0].id(),a.checked),s.mapping.toJSON(this.databind.patientVM));c.getInstance().setPatientData(JSON.parse(t))},u.prototype.dependentOptions=function(a,t){if(t){var n=this.databind.patientVM.dependent_indication_modifier();if((n=n.filter(function(t,e,i){return t.indication()==a||t.modifier()==a})).length){var e=this.databind.patientVM.indication.options(),i=this.databind.patientVM.modifier.options();if(n[0].indication()==a){if((i=i.filter(function(t,e,i){return t.id()==n[0].modifier()})).length)for(var d=0;d<i.length;d++)i[d].selectedOpt(!1)}else if(n[0].modifier()==a&&(e=e.filter(function(t,e,i){return t.id()==n[0].indication()})).length)for(d=0;d<e.length;d++)e[d].selectedOpt(!1)}}},u.prototype.onSomeEvent=function(t){var a,e=this;if("ARB_ARC_OPTION_QUESTION"==t.type)return a=e.databind.gdmtVM.ACE_ARB.selectedOpt(),i=(i=e.databind.gdmtVM.ACE_ARB.options()).filter(function(t,e,i){return t.id()==a}),e.databind.getCopyText(i[0].opQueCopytext());if("IS_ARB_ARC_OPTION_AVAILABLE"==t.type)return"Neither"==(a=e.databind.gdmtVM.ACE_ARB.selectedOpt())||window.appResetting||p("html,body").stop().animate({scrollTop:p("#divACEARBDrugs").offset().top},1e3),!(!a||"Neither"==a||"ARNI"==a);if("GET_SELECTED_ARB_ARC_OPTION"==t.type)return a=e.databind.gdmtVM.ACE_ARB.selectedOpt(),i=(i=e.databind.gdmtVM.ACE_ARB.options()).filter(function(t,e,i){return t.id()==a}),setTimeout(function(){e.databind.acearbSelect(i[0].selectedOpt())},100),i[0].options;if("GET_ACE_ARB_NEITHER_QUESTIONS"!=t.type)return"GET_BB_OPTION"==t.type?(i=e.databind.gdmtVM.beta_blocker.drugs,setTimeout(function(){e.databind.bbSelect(i.selectedOpt())},200),i.options()):"IS_BB_QUESTION"==t.type?("bb_op0"!=(i=e.databind.gdmtVM.beta_blocker.drugs).selectedOpt()&&"bb_opsl"!=i.selectedOpt()||e.databind.gdmtVM.beta_blocker.ques().filter(function(t,e,i){t.selectedOpt(!1)}),"bb_op0"==i.selectedOpt()||"bb_opsl"==i.selectedOpt()):"GET_BB_QUESTIONS"==t.type?i=e.databind.gdmtVM.beta_blocker.ques():"GET_DIURETIC_QUESTIONS"==t.type?i=e.databind.gdmtVM.diuretic.ques():"GET_NYHA_OPTION"==t.type?(i=e.databind.patientVM.NYHA,setTimeout(function(){e.databind.NYHASelect(i.selectedOpt())},200),i.options()):"GET_LVEF_OPTION"==t.type?(i=e.databind.patientVM.LVEF,setTimeout(function(){e.databind.LVEFSelect(i.selectedOpt())},200),e.databind.patientVM.LVEF.options().filter(function(t,e,i){return"LUN"!=t.id()})):void 0;if("Neither"==(a=e.databind.gdmtVM.ACE_ARB.selectedOpt()))return[];for(var i=e.databind.gdmtVM.ACE_ARB.options(),n=[],d=0;d<i.length;d++)if(i[d].id()==a){n=i[d].que;break}return n},u.prototype.populateIndicationAndModifier=function(){var r=this;c.getInstance().getHFLogicModel().getModIndList(this.databind,function(t){var e=r.databind.patientVM.modifier.options(),d=t.modifierlist,i=t.advicelist,e=e.filter(function(t,e,i){var a=!1;t.selectedOpt(!1);for(var n=0;n<d.length;n++)if(d[n]==t.id()){a=!0;break}return a}),a=(r.databind.modifierlist(e),r.databind.patientVM.indication.options()),o=t.indicationlist,e=a.filter(function(t,e,i){var a=!1;t.selectedOpt(!1);for(var n=0;n<o.length;n++)if(o[n]==t.id()){a=!0;break}return a}),e=(i.some(function(t){return"AAM14"===t.id})&&(e=e.filter(function(t){return"i6"!==t.id()&&"i7"!==t.id()})),r.databind.indicationlist(e),0==r.databind.indicationlist().length&&0==r.databind.modifierlist().length?(a=r.databind.patientVM.NYHA.selectedOpt(),i=r.databind.patientVM.LVEF.selectedOpt(),u.isNoneGDMTSelected||"NYHASL"===a||"LSL"===i||r.showFirstlineButton(),r.databind.showPatientScenario(!1)):(r.databind.showContinueBtn()||r.databind.getAdviceButtonState("active"),r.databind.showPatientScenario()?r.databind.showFLTherapyBtn(!1):0===r.databind.indicationlist().length&&0===r.databind.modifierlist().length||(r.databind.showContinueBtn(!0),r.databind.showFLTherapyBtn(!1))),s.mapping.toJSON(r.databind.patientVM)),a=(c.getInstance().setPatientData(JSON.parse(e)),p("#divIndication").removeClass("fadeIn animated").addClass("fadeIn animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p(this).removeClass("fadeIn animated")}),t.advicelist.filter(function(t){return"Ivabridine"===t.id})[0]),i=r.databind.patientVM.indication.CIforIvabridine,e=(i.isAdviceTriggered(!1),i.yesSelected(!1),i.noSelected(!1),i.rasNonCIs()),t=l.findAndGetValue(r.databind.contraindications.ACE_ARB.ques,"que5"),n=l.getSelectedOptions(t.options);e.filter(function(e){return!!n.filter(function(t){return e===t.id()})[0]}).length||(t=l.getSelectedOptions(r.databind.patientVM.additionalMedications.options).some(function(t){return"am4"===t.id()}),i.isAdviceTriggered(!!a&&!t)),i.isAdviceTriggered()||(d=(d=r.databind.modifierlist()).filter(function(t,e,i){return"m3"!==t.id()}),r.databind.modifierlist(d))})},e.ViewModel=u}(window,window.UtilityFunctions,window.AppModel,ko,$);var GDPRBanner=function(){var d;function t(){}function a(){var t=document.getElementById("cookie-banner");t&&t.parentNode.removeChild(t)}function n(t){var e=document.createElement("div");e.classList.add("hide-print"),e.id="cookie-banner",$.ajax({method:"GET",url:t+"/external/vexternalcookiebanner"}).done(function(t){e.innerHTML=t,document.body.appendChild(e),t=window.AppModel.getInstance().getCopytext,$("#cookieWarning .col-md-9 .col-lg-9")&&($("#cookieWarning .col-md-9").html(t("cp_gdprBannerText")),$("#ackButton").html(t("cp_gdprBannerBtnText")))})}return window.makeAck=function(){var t="ack-cookie-banner",e=new Date,i=new Date,i=(i.setTime(i.getTime()+864e6),"expires="+i.toUTCString());d=t+"="+e.toUTCString()+";"+i+";path=/",Lookup.isNativeApplication?localStorage.setItem(t,d):document.cookie=d,a()},t.prototype.getCookieBanner=function(){var e=window.acc.gdprBannerUrl,i=function(t){var e=t+"=";d=Lookup.isNativeApplication?localStorage.getItem(t):document.cookie;for(var i=decodeURIComponent(d).split(";"),a=0;a<i.length;a++){for(var n=i[a];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""}("ack-cookie-banner");i?$.ajax({method:"GET",url:e+"/wapi/CookieBannerHelper/GetGDPRPolicyUpdatedDate"}).done(function(t){t=t?new Date(t):"";t&&new Date(i)>t?a():n(e)}):n(e)},t}();!function(){window.acc||console.log("ERROR! - please check if settingsjs is properly merged from Grunt(window.acc is undefind)"),window.logError=function(t){console.log(t)};var e;document.addEventListener("deviceready",function(){setTimeout(function(){navigator.splashscreen.hide()},4e3),StatusBar.overlaysWebView(!1),StatusBar.backgroundColorByName("black")},!1),window.setScreenSpacerHeight=function(){var t=void 0!==window.innerWidth?window.innerHeight:(void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?document.documentElement:document.getElementsByTagName("body")[0]).clientHeight,t=t-($("header").outerHeight()+$("footer").outerHeight());$(".screen-spacer").css("min-height",t)},window.onresize=function(t){clearTimeout(e),e=setTimeout(function(){window.setScreenSpacerHeight()},100)}}(),function(t,e,i,a,n,d){function o(){}o.prototype.appModel=t.getInstance(),o.prototype.jsonService=new i,o.prototype.init=function(){var t=this;this.jsonService.loadJson(function(){t.jsonDataLoaded(),t.hidePreloader(),t.appModel.getHFLogicModel().hfLogicData=t.jsonService.hfLogicData,(new window.GDPRBanner).getCookieBanner()})},o.prototype.hidePreloader=function(){setTimeout(function(){document.getElementById("spinner").style.display="none"},800)},o.prototype.jsonDataLoaded=function(){this.initViewModel(),this.initKnockout()},o.prototype.initKnockout=function(){var e=this,t=this.viewModel.databind;n.Href.hash="#!/",n.extendWithPage(t),a.applyBindings(t),n.start();"#!/content/staticadviceviewpage"==window.location.hash.split("?")[0]?(t=window.location.hash.split("?")[1],e.viewModel.loadStaticAdvice(t)):n.navigate("#!/content/evaluate");var i=new d;i.routeGuard(),n.afterShow.add(function(t){i.afterShow(t),e.viewModel.onPagerAfterShow(t)}),$(document).foundation(),this.foundationTooltipHandlers()},o.prototype.foundationTooltipHandlers=function(){$(window).click(function(t){$(t.target).hasClass("mytooltip")||$(".tooltip").hide()}),$(window).scroll(function(){try{0<document.getElementsByClassName("mytooltip").length&&$(".mytooltip").foundation("hide")}catch(t){}}),document.addEventListener("touchstart",function(t){t.stopPropagation();try{0<document.getElementsByClassName("mytooltip").length&&$(".mytooltip").foundation("hide")}catch(t){}},!1)},o.prototype.initViewModel=function(){this.viewModel=new e,this.viewModel.init(),this.viewModel.initGDMT(this.appModel.getGDMTData()),this.viewModel.initPatient(this.appModel.getPatientData()),this.viewModel.initKo(),this.viewModel.initChangeEvent()},(new o).init()}((window,window.AppModel),window.ViewModel,window.JSONService,ko,pager,window.Routing);